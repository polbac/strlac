;/*FB_PKG_DELIM*/

__d("LSFilteredThreadsRangesQuery",["LSGetCursor","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.i64.neq(a[10],f)?d[0]=a[10]:d[0]=c.i64.cast([0,0]),a[11]!==f?d[1]=a[11]:d[1]="",(a[2]&&c.i64.neq(a[7],f)&&c.i64.neq(a[4],f)||a[3]&&c.i64.neq(a[6],f)&&c.i64.neq(a[5],f))&&!(a[2]&&c.i64.neq(a[7],f)&&c.i64.neq(a[4],f)&&a[3]&&c.i64.neq(a[6],f)&&c.i64.neq(a[5],f))?c.seq([function(e){return d[3]=a[4]==null?c.i64.cast([-2147483648,0]):a[4],d[4]=a[7]==null?c.i64.cast([0,1]):a[7],d[10]=c.i64.gt(d[4],c.i64.cast([0,1]))&&c.i64.gt(d[3],c.i64.cast([-2147483648,0])),c.sp(b("LSGetCursor"),c.i64.cast([0,1])).then(function(a){return a=a,d[2]=a[0],a})},function(e){return d[5]=new c.Map(),d[5].set("cursor",d[2]),d[5].set("filter",a[1]),d[5].set("is_after",a[3]),d[5].set("parent_thread_key",a[0]),d[5].set("reference_activity_timestamp",a[3]?a[6]:a[7]),d[5].set("reference_thread_key",a[3]?a[5]:a[4]),d[5].set("secondary_filter",d[0]),d[5].set("filter_value",d[1]),d[5].set("sync_group",c.i64.cast([0,1])),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[11]=c.i64.of_float(Date.now()),d[6]=c.i64.add(d[11],c.i64.cast([0,0]))):d[6]=c.i64.cast([0,0]),d[7]=c.toJSON(d[5]),c.sp(b("LSIssueNewTaskAndGetTaskID"),"trq",c.i64.cast([0,313]),d[7],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,d[6]).then(function(a){return a=a,d[8]=a[0],a})},function(b){return c.ftr(c.db.table(247).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.parentThreadKey,a[0])&&c.i64.eq(b.threadRangeFilter,a[1])&&c.i64.eq(b.secondaryThreadRangeFilter,d[0])&&b.threadRangeFilterValue===d[1]}).next().then(function(b,e){e=b.done;b=b.value;return e?c.db.table(247).add({folderName:"",parentThreadKey:a[0],minThreadKey:d[3]==null?c.i64.cast([-2147483648,0]):d[3],minLastActivityTimestampMs:d[4]==null?c.i64.cast([0,1]):d[4],threadRangeFilter:a[1],secondaryThreadRangeFilter:d[0],threadRangeFilterValue:d[1],maxLastActivityTimestampMs:c.i64.cast([0,1]),maxThreadKey:c.i64.cast([-2147483648,0]),isLoadingBefore:d[10],isLoadingAfter:!1,hasMoreBefore:d[10],hasMoreAfter:!1}):(b.item,c.fe(c.ftr(c.db.table(247).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.parentThreadKey,a[0])&&c.i64.eq(b.threadRangeFilter,a[1])&&c.i64.eq(b.secondaryThreadRangeFilter,d[0])&&b.threadRangeFilterValue===d[1]}),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:d[10],hasMoreAfter:!1})}))})}]):c.resolve()},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSClearTables",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(a){return b.seq([function(a){return b.fe(b.db.table(67).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.db.table(66).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.db.table(65).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.db.table(69).fetch(),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSInsertRankingContacts",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("limit",a[0]),d[1]=c.createArray(),d[5]=(d[1].push("search_contacts"),d[1]),d[2]=c.i64.of_float(Date.now()),d[5]=(d[1].push(c.i64.to_string(d[2])),d[1]),d[3]=c.toJSON(d[1]),d[4]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),d[3],c.i64.cast([0,452]),d[4],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("IGDInboxContextProviders.react",["IGDInboxClickedThreadContextProvider","IGDProfessionalIGFolderContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.children;return h.jsx(d("IGDProfessionalIGFolderContext.react").IGDProfessionalFolderContextProvider,{children:h.jsx(d("IGDInboxClickedThreadContextProvider").IGDInboxClickedThreadContextProvider,{children:a})})}a.displayName=a.name+" [from "+f.id+"]";g.IGDInboxContextProviders=a}),98);
__d("MWPUseIsThreadMuted.bs",["I64","ServerTime","clearTimeout","react","setTimeout","useIsMountedRef"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useState;function j(a){var b=Math.min(d("I64").to_float(a.muteExpireTimeMs),d("I64").to_float(a.muteCallsExpireTimeMs));a=Math.max(d("I64").to_float(a.muteExpireTimeMs),d("I64").to_float(a.muteCallsExpireTimeMs));if(b===-1)return-1;else return a}function k(a){if(a<=-1)return!0;else return a>d("ServerTime").getMillis()}function a(a){var b=j(a),e=c("useIsMountedRef")();a=i(function(){return k(b)});var f=a[1];h(function(){var a=k(b);f(function(){return a});var g=b===-1;if(!(a&&!g))return;var h=c("setTimeout")(function(){if(e.current)return f(function(){return!1})},b-d("ServerTime").getMillis());return function(){c("clearTimeout")(h)}},[b,f,e]);return a[0]}g.useHook=a}),98);
__d("IGDThreadListItemContext.react",["MWPIsThreadUnread.bs","MWPUseIsThreadMuted.bs","MWPUsePresenceStatesForThread.bs","MWPUseThreadHasActiveUser.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react"),j=i.createContext,k=i.useContext,l=i.useMemo,m=j(!1),n=j(!1),o=j(void 0);function a(a){var b=a.children,c=a.thread;a=d("MWPUseIsThreadMuted.bs").useHook(c);var e=d("MWPUsePresenceStatesForThread.bs").useHook(c),f=d("MWPUseThreadHasActiveUser.bs").useHook(e),g=l(function(){return{isActive:f,lastActivityTimestampMs:c.lastActivityTimestampMs,presenceState:e,snippet:c.snippet}},[f,e,c.lastActivityTimestampMs,c.snippet]);return h.jsx(m.Provider,{value:d("MWPIsThreadUnread.bs").isThreadUnread(c),children:h.jsx(n.Provider,{value:a,children:h.jsx(o.Provider,{value:g,children:b})})})}a.displayName=a.name+" [from "+f.id+"]";function b(){return k(m)}function c(){return k(n)}function e(){return k(o)}g.IGDThreadListItemContextProvider=a;g.useIGDThreadListItemIsUnread=b;g.useIGDThreadListItemIsMuted=c;g.useIGDThreadListItemActivity=e}),98);
__d("IGDJoinButtonWithBlockCheck.react",["I64","LSIntEnum","LSRtcCallState","RTWebIncomingRingConfiguration","ReQL","ReQLSuspense","deferredLoadComponent","justknobx","react","requireDeferredForDisplay","useIsThreadBlocked","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("deferredLoadComponent")(c("requireDeferredForDisplay")("IGDJoinCallButton.react").__setRef("IGDJoinButtonWithBlockCheck.react"));function j(a){var b=c("useReStore")();return d("ReQLSuspense").useFirstExn(function(){return d("ReQL").fromTableAscending(b.table("rtc_ongoing_calls_on_threads_v2")).getKeyRange(a).map(function(a){a=a.ongoingCallServerInfoData;return a})},[b,a],f.id+":43")}function k(a){var b=c("useReStore")();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("threads")).getKeyRange(a).map(function(a){a=a.ongoingCallState;return a})},[b,a],f.id+":57")}function a(a){var b;a=a.thread;var e=a.threadKey;b=(b=k(e))!=null?b:d("LSIntEnum").ofNumber(c("LSRtcCallState").NO_ONGOING_CALL);e=j(e);b=!d("I64").equal(b,d("LSIntEnum").ofNumber(c("LSRtcCallState").AUDIO_GROUP_CALL))&&!d("I64").equal(b,d("LSIntEnum").ofNumber(c("LSRtcCallState").AUDIO_1TO1_CALL));var f=c("useIsThreadBlocked")(),g=c("justknobx")._("1300")?d("RTWebIncomingRingConfiguration").isSupportedClient():!0;return!f&&g&&e!=null?h.jsx(i,{isVideo:b,serverInfoData:e,threadKey:a.threadKey,threadType:a.threadType}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisIGCoreAlertOffNewPanoOutline24Icon",["PolarisIGCoreSVGIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("PolarisIGCoreSVGIcon"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:h.jsx("path",{d:"M15.209 18.294a1 1 0 0 0-.707-.293H6.184a2.002 2.002 0 0 1-1.74-2.993l.47-.822a8.34 8.34 0 0 0 1.093-4.174c0-.159.005-.316.017-.471a1 1 0 1 0-1.994-.15 8.093 8.093 0 0 0-.023.63 6.341 6.341 0 0 1-.83 3.175l-.47.822a4.001 4.001 0 0 0 3.477 5.983h1.944a4 4 0 0 0 7.827-.382 1 1 0 0 0-.282-.86Zm-3.207 2.708a2 2 0 0 1-1.732-1.001h3.463a2.017 2.017 0 0 1-1.731 1.001Zm11.205.291-2.521-2.521a4.04 4.04 0 0 0 .976-1.629 3.957 3.957 0 0 0-.356-3.123l-.484-.853A6.358 6.358 0 0 1 20 9.997a7.953 7.953 0 0 0-4.745-7.302 3.972 3.972 0 0 0-6.51.002 8.011 8.011 0 0 0-2.438 1.697L2.707.793a1 1 0 0 0-1.414 1.414l20.5 20.5a1 1 0 0 0 1.414-1.414Zm-3.46-4.728a2.042 2.042 0 0 1-.468.8L7.72 5.805a6.004 6.004 0 0 1 2.068-1.377.998.998 0 0 0 .494-.426 1.976 1.976 0 0 1 3.439 0 1 1 0 0 0 .494.425 5.989 5.989 0 0 1 3.786 5.634 8.303 8.303 0 0 0 1.082 4.094l.483.852a1.975 1.975 0 0 1 .181 1.558Z"})}))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("IGDThreadListItemEnd.react",["fbt","CometBadge.react","IGDJoinButtonWithBlockCheck.react","IGDSBox.react","IGDThreadListItemContext.react","PolarisCallGatingHelpers","PolarisIGCoreAlertOffNewPanoOutline24Icon","ReQL","ReQLSuspense","react","stylex","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={badge:{backgroundColor:"x1tu34mt",$$css:!0},endMargin:{marginEnd:"x1hwekxz",$$css:!0},muteIcon:{paddingEnd:"x1mpkggp",paddingStart:"x1t2a60a",$$css:!0},noShrink:{flexShrink:"x2lah0s",$$css:!0}};function k(a){var b=a.addEndMargin;a=a.isMuted;var d=h._("__JHASH__NCRbaa_g3bP__JHASH__");return a?i.jsx("div",{className:c("stylex")(j.muteIcon,b?j.endMargin:!1),children:i.jsx(c("PolarisIGCoreAlertOffNewPanoOutline24Icon"),{alt:d,color:"ig-secondary-text",size:15})}):null}k.displayName=k.name+" [from "+f.id+"]";function l(a){a=a.isUnread;if(a)return i.jsx(c("CometBadge.react"),{colorOverride:[j.badge]});else return null}l.displayName=l.name+" [from "+f.id+"]";function m(a){var b=c("useReStore")();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("rtc_ongoing_calls_on_threads_v2")).getKeyRange(a).map(function(a){a=a.ongoingCallServerInfoData;return a})},[b,a],f.id+":110")}function a(a){a=a.thread;var b=d("IGDThreadListItemContext.react").useIGDThreadListItemIsMuted(),e=d("IGDThreadListItemContext.react").useIGDThreadListItemIsUnread(),f=m(a.threadKey);f=f!=null;return i.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"end",xstyle:j.noShrink,children:f&&d("PolarisCallGatingHelpers").isWebCallingEnabled()?i.jsx(c("IGDJoinButtonWithBlockCheck.react"),{thread:a}):i.jsxs(i.Fragment,{children:[i.jsx(k,{addEndMargin:b&&e,isMuted:b}),i.jsx(l,{isUnread:e})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDThreadListItemSubtitle.react",["fbt","CometMiddot.react","CometRelativeTimestamp.react","I64","IGDPresenceTextForThread.react","IGDSBox.react","IGDSText.react","LSMessagingThreadTypeUtil","MAWThreadCutover.bs","cr:526","cr:6703","react","useIGDDeviceType"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={content:{height:"xmix8c7",width:"xh8yej3",$$css:!0},lockIcon:{flexShrink:"x2lah0s",$$css:!0},middot:{color:"x1roi4f4",flexShrink:"x2lah0s",marginTop:"xdj266r",marginEnd:"xw3qccf",marginBottom:"xat24cr",marginStart:"xsgj6o6",$$css:!0},minWidth:{flexShrink:"x2lah0s",minWidth:"xeuugli",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",$$css:!0},timestamp:{whiteSpace:"xuxw1ft",$$css:!0}};function k(a){a=a.visible;return a?i.jsx("span",{className:"x1roi4f4 x2lah0s xdj266r xw3qccf xat24cr xsgj6o6",children:i.jsx(c("CometMiddot.react"),{})}):null}function l(a){var b=a.isUnread,e=a.lastMessageTimestamp;a=a.snippet;var f=d("useIGDDeviceType").useIGDDeviceType();f=f.isMobile;e=e!=null&&!d("I64").equal(e,d("I64").zero)?i.jsx("div",{className:"x2lah0s xeuugli",children:i.jsx(c("IGDSText.react"),{color:"secondaryText",maxLines:1,size:f?"body":"footnote",weight:"normal",children:i.jsx("div",{className:"xuxw1ft",children:i.jsx(c("CometRelativeTimestamp.react"),{date:new Date(d("I64").to_float(e)),format:"minimized"})})})}):null;return i.jsxs(i.Fragment,{children:[i.jsx(c("IGDSText.react"),{color:b?"primaryText":"secondaryText",maxLines:1,size:f?"body":"footnote",weight:b?"bold":"normal",children:a}),i.jsx(k,{visible:a!=null&&e!=null}),e]})}function m(a){var e=a.isRestricted,f=a.isSecure,g=a.isUnread,m=a.lastMessageTimestamp,n=a.presenceState,o=a.snippet;a=a.thread;var p=d("useIGDDeviceType").useIGDDeviceType(),q=p.isMobile;p=d("MAWThreadCutover.bs").useIsCutoverSecureThread(a.threadKey);return i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",xstyle:j.content,children:[f&&!p&&b("cr:526")!==null?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"x2lah0s",children:i.jsx(b("cr:526"),{isUnread:g})}),i.jsx(k,{visible:!0})]}):null,e?i.jsx(c("IGDSText.react"),{color:"secondaryText",maxLines:1,weight:"normal",children:h._("__JHASH___6nY1OjPyij__JHASH__")}):b("cr:6703")!=null?i.jsx(b("cr:6703"),{thread:a}):g&&o!==null?i.jsx(l,{isSecure:f,isUnread:g,lastMessageTimestamp:m,snippet:o}):i.jsx(c("IGDPresenceTextForThread.react"),{presenceState:n,renderNullState:function(){return i.jsx(l,{isSecure:f,isUnread:g,lastMessageTimestamp:m,snippet:o})},renderWrapper:function(a){return i.jsx(c("IGDSText.react"),{color:"secondaryText",maxLines:1,size:q?"body":"footnote",weight:"normal",children:a})}})]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.isRestricted;b=b===void 0?!1:b;var c=a.isUnread,e=a.lastMessageTimestamp,f=a.presenceState,g=a.snippet;a=a.thread;var h=d("LSMessagingThreadTypeUtil").isSecure(a.threadType);return i.jsx("div",{className:"x6s0dn4 x78zum5",children:i.jsx(m,{isRestricted:b,isSecure:h,isUnread:c,lastMessageTimestamp:e,presenceState:f,snippet:g,thread:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSContactInternalBadge.react",["IGDSText.react","LSContactBitOffset","LSIntEnum","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i="INTERNAL";function a(a){a=a.contact;a=(a=d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(82),a))!=null?a:!1;if(a)return h.jsx("span",{className:"x5keihi x1npaq5j x1c83p5e x1enjb0b x199158v x78zum5 x1q0g3np xsgj6o6 xw3qccf x1iorvi4 x150jy0e xjkvuk6 x1e558r4",children:h.jsx(c("IGDSText.react"),{color:"webAlwaysWhite",size:"miniscule",weight:"bold",children:i})});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSInternalBadge.react",["I64","LSContactInternalBadge.react","MWPActor.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.thread,e=c("useReStore")(),g=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.table("participants")).getKeyRange(b.threadKey).filter(function(a){return!d("I64").equal(a.contactId,g)}).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(e.table("contacts")).getKeyRange(a.contactId),f.id+":44");return[a,b]}).take(2)},[e,b.threadKey,g],f.id+":35");var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("contacts")).getKeyRange(g)},[e,g],f.id+":54"),j=a.length;if(j>1)return null;else if(j===0){if(i==null)return null;j=i}else{i=a[0];a=i[1];if(a==null)return null;j=a}return h.jsx(c("LSContactInternalBadge.react"),{contact:j})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWGroupInvitesForThread.bs",["Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","ReQL.bs","ReQLSubscription.bs","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("useReStore")(),e=d("ReQLSubscription.bs").useArray(d("Int64Hooks").useMemoInt64(function(){return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableDescending(b.table("group_invites")),{hd:a.threadKey,tl:0})},[b,a.threadKey]),"frsmt0yo");return e}function b(a){var b=d("LSMessagingThreadTypeUtil").isSecure(a.threadType),c=d("LSMessagingThreadTypeUtil").isGroup(a.threadType);a=d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(105),a);if(b&&c)return a;else return!1}g.useValue=a;g.isGroupInviteThread=b}),98);
__d("useIsThreadSelected",["I64","IGDRouteProvider.react","emptyFunction","react","useIGDDeviceType"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.createContext,j=e.useContext,k=e.useMemo,l=e.useRef,m=e.useSyncExternalStore,n=i({addEventListener:function(){return c("emptyFunction")},getSelectedThreadKey:function(){return void 0}}),o=function(){var a=new Set(),b=void 0,c=function(){for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e()}},d=function(){return b},e=function(a){b=a,c()},f=function(b){a.add(b);return function(){a["delete"](b)}};return{addEventListener:f,getSelectedThreadKey:d,setSelectedThreadKey:e}};function a(a){a=a.children;var b=l(void 0);b.current||(b.current=o());var c=k(function(){return{addEventListener:b.current.addEventListener,getSelectedThreadKey:b.current.getSelectedThreadKey}},[]);return h.jsxs(h.Fragment,{children:[h.jsx(p,{children:function(a){b.current.setSelectedThreadKey(a);return null}}),h.jsx(n.Provider,{value:c,children:a})]})}a.displayName=a.name+" [from "+f.id+"]";function p(a){a=a.children;var b=d("IGDRouteProvider.react").useThreadKeyFromCurrentRoute();return a(b)}function b(a){var b=d("useIGDDeviceType").useIGDDeviceType(),c=b.isDesktop;b=j(n);var e=b.addEventListener,f=b.getSelectedThreadKey;return m(e,function(){var b=f();return c&&!!b&&d("I64").equal(a,b)})}g.SelectedThreadKeyContextProvider=a;g.useIsThreadSelected=b}),98);
__d("useMWPPreloadThread",["JSScheduler","LSFactory","LSIntEnum","LSIssueMessagesRangeQuery","LSMailboxMessagesRangeQueryDirection","ReQL","emptyFunction","promiseDone","react","useCometPreloader","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(a,b,e,f){var g=c("useReStore")(),i=h(function(){f&&e&&c("JSScheduler").scheduleSpeculativeCallback(function(){f.preload()}),c("promiseDone")(g.runInTransaction(function(b){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(g.table("messages_ranges_v2__generated")).getKeyRange(a)).then(function(e){if(e&&!e.isLoadingBefore)return c("LSIssueMessagesRangeQuery")(a,e.minTimestampMs,d("LSIntEnum").ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),c("LSFactory")(b))})},"readwrite","ui"))},[JSON.stringify(a),e,f,g]);b=b?c("emptyFunction"):i;return c("useCometPreloader")("button",b,b)}g["default"]=a}),98);
__d("IGDThreadListItem.react",["CometPlaceholder.react","CometTextWithEntities.react","I64","IGDAvatar.react","IGDIsCompactModeContext.react","IGDListCell.react","IGDListCellSelectedContext.react","IGDNavigation","IGDSBox.react","IGDSText.react","IGDSVerifiedBadge.react","IGDThreadListItemContext.react","IGDThreadListItemEnd.react","IGDThreadListItemSubtitle.react","InteractionTracingMetrics","JSResourceForInteraction","LSIntEnum","LSInternalBadge.react","LSMessagingThreadTypeUtil","LSThreadTitle.react","LSVerificationBadge.bs","MAWGating","MAWGroupInvitesForThread.bs","MWVerticalRhythm","ReQL","asyncToGeneratorRuntime","cr:5855","emptyFunction","promiseDone","react","shallowEqualI64","useCometLazyDialog","useIGDDeviceType","useIsThreadSelected","useMWPPreloadThread","useReStore","useSimpleImpression","useStableCallback","useStableValue"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo,j=c("JSResourceForInteraction")("IGDGroupInvitesDialog.react").__setRef("IGDThreadListItem.react"),k={cell:{width:"xxsgkw5",$$css:!0}},l=[];function m(a){a=a.thread;return h.jsxs(h.Fragment,{children:[h.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",width:244,children:[h.jsx(p,{children:h.jsx(c("LSThreadTitle.react"),{thread:a,transforms:l})}),h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(d("LSVerificationBadge.bs").make,{icon:h.jsx(c("IGDSVerifiedBadge.react"),{size:"small"}),thread:a})}),h.jsx(c("IGDSBox.react"),{marginStart:1,children:h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(c("LSInternalBadge.react"),{thread:a})})})]}),h.jsx(c("MWVerticalRhythm"),{height:8}),h.jsx(q,{thread:a})]})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var e=a.hoverStateVisible,f=a.openInbox,g=a.thread,i=b("cr:5855")==null?function(a){return a()}:b("cr:5855").useHook(g.threadKey),l=d("I64").equal(g.parentThreadKey,d("LSIntEnum").ofNumber(-1)),n=d("I64").equal(g.parentThreadKey,d("LSIntEnum").ofNumber(-3)),p=c("useReStore")();c("useSimpleImpression")(function(){var a=d("LSMessagingThreadTypeUtil").isSecure(g.threadType),b=c("InteractionTracingMetrics").currentInteractionLogger();return b.addMetadata("hasSecureThread",a?1:0)});a=c("useCometLazyDialog")(j);var q=a[0];a=d("LSMessagingThreadTypeUtil").isSecure(g.threadType);a=c("useMWPPreloadThread")(g.threadKey,a,!1);var s=a[0];a=a[1];var t=d("useIGDDeviceType").useIGDDeviceType().isMobile,u=d("IGDIsCompactModeContext.react").useIsCompactMode(),v=u?void 0:h.jsx(c("IGDThreadListItemEnd.react"),{thread:g}),w=u?void 0:h.jsx(m,{thread:g});return h.jsx(o,{threadKey:g.threadKey,children:h.jsx(c("IGDListCell.react"),{addOnEnd:v,addOnStart:h.jsx(r,{thread:g}),content:w,hoverStateVisible:e,noopOnPressWhenSelected:!0,onHoverIn:s,onHoverOut:a,onPress:function(){var a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(p.table("threads")).getKeyRange(g.threadKey)));if(a==null)return;var b=d("MAWGroupInvitesForThread.bs").isGroupInviteThread(a);d("MAWGating").isGroupInvitesEnabled()&&b?q({onClose:c("emptyFunction"),thread:a},function(){}):yield i(function(){f({clientThreadKey:a.clientThreadKey,threadKey:g.threadKey,threadType:g.threadType},l?"pendingRequests":n?"inboxSpam":"inboxThreadList")})});return function(){return a.apply(this,arguments)}}();c("promiseDone")(a())},role:"row",size:t?"small":"large",testid:void 0,xstyle:!u&&!t&&k.cell})})}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=a.children;a=a.threadKey;a=d("useIsThreadSelected").useIsThreadSelected(a);return h.jsx(d("IGDListCellSelectedContext.react").IGDListCellSelectedContextProvider,{selected:a,children:b})}o.displayName=o.name+" [from "+f.id+"]";function p(a){a=a.children;var b=d("IGDThreadListItemContext.react").useIGDThreadListItemIsUnread();return h.jsx(c("IGDSText.react"),{color:"primaryText",maxLines:1,size:"body",weight:b?"semibold":"normal",children:a})}p.displayName=p.name+" [from "+f.id+"]";function q(a){a=a.thread;var b=d("IGDThreadListItemContext.react").useIGDThreadListItemIsUnread(),e=d("IGDThreadListItemContext.react").useIGDThreadListItemActivity(),f=e.lastActivityTimestampMs,g=e.presenceState;e=e.snippet;e=e!=null?h.jsx(c("CometTextWithEntities.react"),{maxLines:1,text:e,transforms:l}):null;return h.jsx(c("IGDThreadListItemSubtitle.react"),{isUnread:b,lastMessageTimestamp:f,presenceState:g,snippet:e,thread:a})}q.displayName=q.name+" [from "+f.id+"]";function r(a){a=a.thread;var b=d("IGDThreadListItemContext.react").useIGDThreadListItemActivity();b=b.isActive;return h.jsx(c("IGDAvatar.react"),{isActive:b,size:"large",thread:a})}r.displayName=r.name+" [from "+f.id+"]";function a(a){a=a.thread;var b=d("useIGDDeviceType").useIGDDeviceType(),e=b.isDesktop;b=d("IGDNavigation").useIGDNavigation();var f=c("useStableCallback")(b.openInbox);d("IGDNavigation").usePreloadRoute(a.threadKey);var g=d("useStableValue").useStableValue({parentThreadKey:a.parentThreadKey,threadKey:a.threadKey,threadName:a.threadName,threadPictureUrl:a.threadPictureUrl,threadPictureUrlExpirationTimestampMs:a.threadPictureUrlExpirationTimestampMs,threadPictureUrlFallback:a.threadPictureUrlFallback,threadSubtype:a.threadSubtype,threadType:a.threadType},d("shallowEqualI64").shallowEqualI64);b=i(function(){return h.jsx(n,{hoverStateVisible:e,openInbox:f,thread:g})},[e,f,g]);return h.jsx(d("IGDThreadListItemContext.react").IGDThreadListItemContextProvider,{thread:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSThreadRangeFilter",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,UNREAD_ONLY:1,GROUPS_ONLY:2,IGD_PRO_PRIMARY:3,IGD_PRO_GENERAL:4,PINNED:5,READ_BUT_UNRESPONDED:6,THREAD_CHAT_LABEL:7,BUSINESS_INBOX_FOLLOW_UP:8,FAMILY_AND_FRIENDS:9,CHANNELS:10,IGD_PRO_CHANNELS:11,BUSINESS_FOLDER_DONE:12,BUSINESS_FOLDER_SPAM:13,BUSINESS_FOLDER_FOLLOW_UP:14,BUSINESS_SECONDARY_FILTER:15,FROM_ADS:16,PRIORITY:17,ASSIGNED_ADMIN:18,COMMUNITIES:19,WORKROOMS_ONLY:20,SUBTHREAD:21,CHANNELS_AND_INVITES:22});f["default"]=a}),66);
__d("MWFocusTable.react",["FocusTable.react","focusScopeQueries"],(function(a,b,c,d,e,f,g){"use strict";g.createFocusTable=d("FocusTable.react").createFocusTable,g.tabbableScopeQuery=d("focusScopeQueries").tabbableScopeQuery}),98);
__d("MWThreadListFocusableTable.react",["MWFocusTable.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=d("MWFocusTable.react").createFocusTable(d("MWFocusTable.react").tabbableScopeQuery);var i=a[0];b=a[1];c=a[2];e=function(a){return h.jsx(i,{allowModifiers:!0,tabScopeQuery:d("MWFocusTable.react").tabbableScopeQuery,wrapX:!0,children:a.children})};g.MWThreadListFocusableTableRow=b;g.MWThreadListFocusableTableCell=c;g.MWThreadListFocusableTableScopeQuery=d("MWFocusTable.react").tabbableScopeQuery;g.MWThreadListFocusableTable=e}),98);
__d("MWIsArmadillo",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("135")===!0}g["default"]=a}),98);
__d("MWThreadListSupportedThreadTypes.bs",["LSIntEnum","MWIsArmadillo","MetaConfig"],(function(a,b,c,d,e,f,g){"use strict";a=[d("LSIntEnum").ofNumber(1),d("LSIntEnum").ofNumber(201),d("LSIntEnum").ofNumber(2),d("LSIntEnum").ofNumber(5),d("LSIntEnum").ofNumber(6),d("LSIntEnum").ofNumber(3)].concat(c("MWIsArmadillo")()?[d("LSIntEnum").ofNumber(15),d("LSIntEnum").ofNumber(16)]:[],c("MetaConfig")._("40")||c("MetaConfig")._("41")?[d("LSIntEnum").ofNumber(18),d("LSIntEnum").ofNumber(19),d("LSIntEnum").ofNumber(23)]:[],c("MetaConfig")._("42")?[d("LSIntEnum").ofNumber(150)]:[],c("MetaConfig")._("36")?[d("LSIntEnum").ofNumber(154)]:[],c("MetaConfig")._("32")?[d("LSIntEnum").ofNumber(152)]:[]);g.supportedThreadTypes=a}),98);
__d("MWPFolderFocusedManager.bs",["react","useGlobalEventListener"],(function(a,b,c,d,e,f,g){"use strict";d("react");b=d("react");var h=b.useCallback,i=b.useRef;function a(a,b){var d=i({_0:void 0,TAG:0}),e=h(function(){var c=d.current;if(c.TAG===0)return;b.current&&a!=null&&a();d.current={_0:void 0,TAG:0}},[a,b]),f=h(function(){var a=d.current;if(a.TAG===0){d.current={_0:void 0,TAG:1};return}});c("useGlobalEventListener")("focus",e,{});c("useGlobalEventListener")("blur",f,{})}g.useWatchFocusChanges=a}),98);
__d("useMWPMarkSeen",["Int64Hooks","requireDeferred","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MWPMarkSeenDeferred.bs").__setRef("useMWPMarkSeen");function a(a){var b=c("useReStore")();return d("Int64Hooks").useCallbackInt64(function(){h.onReady(function(c){var d=function(){return c.markSeen(a,b)};d()})},[b,a])}g["default"]=a}),98);
__d("useMarkSeenWhenVisible",["Int64Hooks","MWPFolderFocusedManager.bs","MetaConfig","ReQL","UserActivity","cr:355","emptyFunction","react","useMWPMarkSeen","useReStore","useSimpleImpression","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";e=d("react");var h=e.useCallback,i=e.useRef;function a(a){var e,f=c("useReStore")(),g=i(!1),j=(e=b("cr:355")==null?void 0:b("cr:355")(a))!=null?e:c("emptyFunction");e=c("useVisibilityObserver")({onHidden:function(){g.current=!1},onVisible:function(){g.current=!0}});var k=c("useMWPMarkSeen")(a),l=h(function(){k(),void j()},[k,j]);d("MWPFolderFocusedManager.bs").useWatchFocusChanges(l,g);c("useSimpleImpression")(l);d("Int64Hooks").useEffectInt64(function(){if(c("MetaConfig")._("46"))return function(){};else return d("ReQL").fromTableDescending(f.table("threads").index("parentThreadKeyLastActivityTimestampMs")).getKeyRange(a).take(1).subscribe(function(){c("UserActivity").isOnTab()&&g.current===!0&&l()})},[f,a,l]);return e}g["default"]=a}),98);
__d("MWPBaseThreadList.react",["Box.react","I64","Int64Hooks","LSFactory","LSFilteredThreadsRangesQuery","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQuery","MWCMIsThreadBumped","MWIsXacGroupThread.bs","MWThreadListFocusableTable.react","MWThreadListSupportedThreadTypes.bs","MWXacGating.bs","MessagingThreadSubtype","MetaConfig","ReQL","ReQLPaginatedList.react","ReQLPaginatedList.shared","ReQLSuspense","asyncToGeneratorRuntime","promiseDone","react","useMarkSeenWhenVisible","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useCallback,j=e.useEffect,k=e.useMemo,l=c("MetaConfig")._("41")===!0,m={container:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},emptyContentContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function n(a,e,f,g){g===void 0&&(g=!1),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.table("threads_ranges_v2__generated").get(e));if(b==null||b.isLoadingBefore)return;f&&f();return c("LSThreadsRangesQuery")(b.parentThreadKey,!0,!1,b.minThreadKey,b.maxThreadKey,b.maxLastActivityTimestampMs,b.minLastActivityTimestampMs,d("I64").zero,g,c("LSFactory")(a))});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui"))}function o(a,e,f,g,h){f===void 0&&(f=d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").NONE)),g===void 0&&(g=d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").NONE)),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.table("filtered_threads_ranges_v3__generated").get(e));if(b==null||b.isLoadingBefore)return;h&&h();return c("LSFilteredThreadsRangesQuery")(b.parentThreadKey,f,!0,!1,b.minThreadKey,b.maxThreadKey,b.maxLastActivityTimestampMs,b.minLastActivityTimestampMs,void 0,void 0,g,void 0,c("LSFactory")(a))});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui"))}function p(a,b,e,f,g,h){e===void 0&&(e=d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").NONE));f===void 0&&(f=d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").NONE));h===void 0&&(h=!1);if(b==null)return;if(!b.threadRangeFilter){var i=d("ReQL").key(b.parentThreadKey,b.minThreadKey,b.minLastActivityTimestampMs);n(a,i,g,h)}else{i=d("ReQL").key(b.parentThreadKey,b.minThreadKey,b.minLastActivityTimestampMs,b.threadRangeFilter,b.folderName,b.secondaryThreadRangeFilter,b.threadRangeFilterValue);o(a,i,e,f,g)}}function q(a,b,e,f,g,h){h===void 0&&(h=!1),c("promiseDone")(a.runInTransaction(function(a){g==null?void 0:g();if(e==null)return c("LSThreadsRangesQuery")(b,!0,!1,d("I64").max_int,d("I64").max_int,d("I64").max_int,d("I64").max_int,d("I64").zero,h,c("LSFactory")(a));else return c("LSFilteredThreadsRangesQuery")(b,e,!0,!1,d("I64").max_int,d("I64").max_int,d("I64").max_int,d("I64").max_int,void 0,void 0,f,void 0,c("LSFactory")(a))},"readwrite","ui"))}function a(a){var b=a.afterContent,e=a.beforeContent,g=a.customThreadFilter_DO_NOT_USE,n=a.emptyContent,o=a.filter,r=a.gridLabel,s=a.loadMoreThreads,t=s===void 0?p:s;s=a.loadMoreThreadsForEmptyRange;var u=s===void 0?q:s,v=a.onLoadMoreThreads;s=a.onScroll;var w=a.onReachingTop,x=a.onThreadsLoaded,y=a.pageSize,z=a.parentThreadKey,A=a.renderItem,B=a.renderLoadingAnimation,C=a.secondaryFilter,D=a.setIsEmptyInbox,E=a.shouldSkipE2eeThreadsRanges,F=E===void 0?!1:E;E=a.role;E=E===void 0?"grid":E;var G=a.containerStyle;a=a.imperativeRef;var H=c("useReStore")(),I=d("ReQLSuspense").useFirst(function(){if(o==null)return d("ReQL").fromTableDescending(H.table("threads_ranges_v2__generated")).getKeyRange(z);else return d("ReQL").fromTableDescending(H.table("filtered_threads_ranges_v3__generated")).getKeyRange(z).filter(function(a){return d("I64").equal(a.threadRangeFilter,o)&&(!C||d("I64").equal(a.secondaryThreadRangeFilter,C))})},[H,z,o,C],f.id+":337"),J=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(H.table("pinned_threads").index("pinnedTimestamp"))},[H],f.id+":358"),K=d("ReQLSuspense").useArray(function(){return l?d("ReQL").fromTableAscending(H.table("community_folders")):d("ReQL").empty()},[H],f.id+":364"),L=k(function(){return K.filter(function(a){return a.isHidden}).map(function(a){return d("I64").to_string(a.folderId)})},[K]),M=c("MetaConfig")._("44");I!=null&&!I.isLoadingBefore&&(x&&x());var N=I!=null?d("I64").equal(I.minLastActivityTimestampMs,d("I64").zero)||d("I64").equal(I.minLastActivityTimestampMs,d("I64").one)||(M?d("I64").equal(I.minLastActivityTimestampMs,d("I64").max_int):!1)?null:I.minLastActivityTimestampMs:null,O=I!=null?d("I64").equal(I.maxLastActivityTimestampMs,d("I64").zero)||d("I64").equal(I.maxLastActivityTimestampMs,d("I64").one)?null:I.maxLastActivityTimestampMs:null,P=d("Int64Hooks").useMemoInt64(function(){var a;return{gte:d("ReQL").key((a=N)!=null?a:d("I64").min_int),lte:d("ReQL").key((a=O)!=null?a:d("I64").max_int)}},[O,N]),Q=d("Int64Hooks").useMemoInt64(function(){var a=d("ReQL").fromTableDescending(H.table("threads").index("parentThreadKeyLastActivityTimestampMs")).getKeyRange(z);a=(l?d("ReQL").union(a,d("ReQL").fromTableDescending(H.table("threads").index("secondaryParentThreadKeyLastActivityTimestampMs")).getKeyRange(z)):a).filter(function(a){return c("MWCMIsThreadBumped")(a)&&L.includes(d("I64").to_string(a.parentThreadKey))?!1:d("MWThreadListSupportedThreadTypes.bs").supportedThreadTypes.findIndex(function(b){return d("I64").equal(a.threadType,b)})!==-1&&(!c("MetaConfig")._("45")||J.findIndex(function(b){return d("I64").equal(a.threadKey,b.threadKey)})===-1)&&(d("MWXacGating.bs").isGroupsEnabled()||!d("MWIsXacGroupThread.bs").check(a))&&(!g||g(a))&&!(a.threadSubtype&&d("I64").equal(a.threadSubtype,d("LSIntEnum").ofNumber(c("MessagingThreadSubtype").IG_PRIVATE_EVENT)))});return d("ReQLPaginatedList.shared").fromIterables(d("ReQL").empty(),a)},[H,z,J,g,L]),R=d("ReQLSuspense").useFirst(function(){return Q.descending.bounds(P)},[P,Q],f.id+":470")==null;j(function(){D&&D(R)},[R,D]);d("Int64Hooks").useEffectInt64(function(){I==null&&u(H,z,o,C,v)},[z,I,H,o,C,v,u]);x=c("useMarkSeenWhenVisible")(z);M=i(function(){t(H,I,o,C,v,F)},[H,t,I,o,C,v,F]);var S=i(function(a){return h.jsx(h.Fragment,{children:A(a)},d("I64").to_string(a.threadKey))},[A]);return I==null?B!=null?B():null:h.jsx(c("Box.react"),{"aria-label":r,"data-testid":void 0,ref:x,role:E,xstyle:[m.container,G],children:h.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTable,{children:h.jsx(c("ReQLPaginatedList.react"),{bounds:P,data:Q,direction:"desc",hasReachedBottom:!I.hasMoreBefore,hasReachedTop:!I.hasMoreAfter,imperativeRef:a,onReachingBottom:M,onReachingTop:w,onScroll:s,pageSize:y,renderEmptyContent:function(){return R&&!I.isLoadingAfter&&!I.isLoadingBefore?h.jsx(c("Box.react"),{xstyle:m.emptyContentContainer,children:n}):null},renderFooter:function(){return b},renderHeader:function(){return e},renderItem:S,renderLoadingAnimation:B,xstyle:m.list})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPThreadIsPage.react",["I64","LSContactType","LSIntEnum","MWPActor.react","ReQL","ReQLSuspense","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.createContext,j=e.useContext,k=i();function a(a){var b=a.children,e=a.threadKey,g=c("useReStore")(),i=d("MWPActor.react").useActor();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(g.table("participants")).getKeyRange(e).filter(function(a){return!d("I64").equal(a.contactId,i)}),d("ReQL").fromTableAscending(g.table("contacts")))},[e],f.id+":32");a=a!=null?a[1]:null;a=a!=null?d("I64").equal(a.contactType,d("LSIntEnum").ofNumber(c("LSContactType").PAGE)):!1;return h.jsx(k.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){var a=j(k);if(a!=null)return a;else{c("recoverableViolation")("Using hook useIsPage in a place where we didn't include the context","messenger_web_product");return!1}}g.Provider=a;g.useIsPage=b}),98);
__d("useMemoizableRender",["FBLogger","react","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef;function a(a,b){var d=i(new WeakMap());return h(function(e,f){var g=a(e);e=b(e);var h=d.current.get(g);if(!h||!c("shallowEqual")(e,h.props)){f=f(e);d.current.set(g,{element:f,props:e})}h=d.current.get(g);if(!h)throw c("FBLogger")("ig_web").mustfixThrow("memoized is null/undefined. This should never happen.");return h.element},[a,b])}g["default"]=a}),98);
__d("IGDThreadList.react",["CometCompositeStructureContext","I64","IGDInboxLeftColumnPlaceholder.react","IGDListCellPlaceholder.react","IGDProLogging","IGDSListItemPlaceholder.react","IGDThreadListItem.react","IgTags_InboxFolder","LSIntEnum","LSThreadRangeFilter","MAWGating","MAWJobDefinitions","MAWTimedJob","MWPBaseThreadList.react","MWPBumpEntityKey","MWPThreadIsPage.react","MWThreadKey.react","ReQL","ReQLSuspense","WAJobOrchestratorTypes","cr:5045","promiseDone","qex","react","useHasIGBroadcastChannelTab","useIsThreadSelected","useMemoizableRender","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.memo,j=e.useCallback,k=e.useRef,l="list",m={role:l};e=72;var n={bottom:e*2,top:e*2},o={shimmerOverlay:{bottom:"x1ey2m1c",end:"xds687c",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},threadListHidden:{opacity:"xg01cxk",$$css:!0}},p=i(function(a){var b=a.afterContent,e=a.beforeContent,f=a.emptyContent,g=a.gridLabel,i=a.isMessageRequestRoute,n=i===void 0?!1:i;i=a.parentThreadKey;var p=a.proIgFolder;a=a.visible;var q=k(),s=j(function(){var a;return(a=q.current)==null?void 0:a.getScrollAreaElement()},[]);s=r(s);var t=j(function(a){if(p!=null){return d("I64").equal((a=a.igFolder)!=null?a:d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").PRIMARY),p)}else return!1},[p]),u=j(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("igd.threadlist","load_more_threads");if(n&&d("MAWGating").isArmadillo()&&c("qex")._("235")===!0){var a=d("MAWTimedJob").TimedUIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.getSpams({priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH}));c("promiseDone")(a)}if(p!=null){d("I64").equal(p,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").PRIMARY))?d("IGDProLogging").ODSBumpLoadThreadsPrimary():d("I64").equal(p,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").GENERAL))&&d("IGDProLogging").ODSBumpLoadThreadsGeneral();return d("IGDProLogging").QPLStart()}},[n,p]),v=j(function(){if(p!=null)return d("IGDProLogging").QPLEndSuccess()},[p]),w=c("useHasIGBroadcastChannelTab")();w=p==null?void 0:d("I64").equal(p,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").PRIMARY))?d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").IGD_PRO_PRIMARY):d("I64").equal(p,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").GENERAL))?d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").IGD_PRO_GENERAL):w&&d("I64").equal(p,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").SUBSCRIBER))?d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").IGD_PRO_CHANNELS):void 0;return h.jsx(c("CometCompositeStructureContext").Provider,{value:m,children:h.jsx(d("useIsThreadSelected").SelectedThreadKeyContextProvider,{children:h.jsx(c("MWPBaseThreadList.react"),{afterContent:b,beforeContent:e,containerStyle:!a&&o.threadListHidden,customThreadFilter_DO_NOT_USE:p!=null?t:void 0,emptyContent:f,filter:w,gridLabel:g,imperativeRef:q,itemPlaceholder:h.jsx(c("IGDSListItemPlaceholder.react"),{fullWidth:!0,index:0,size:"large"}),onLoadMoreThreads:u,onThreadsLoaded:v,parentThreadKey:i,renderItem:s,renderLoadingAnimation:function(){return h.jsxs(h.Fragment,{children:[h.jsx(c("IGDListCellPlaceholder.react"),{}),h.jsx(c("IGDListCellPlaceholder.react"),{})]})},role:l,shouldSkipE2eeThreadsRanges:c("qex")._("57")===!0})})})});function q(){var a=c("useReStore")(),b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("sync_groups")).getKeyRange(d("LSIntEnum").ofNumber(1))},[a],f.id+":224");return b==null?"Loading":d("I64").equal(b.syncStatus,d("LSIntEnum").ofNumber(2))?"Complete":"Loading"}function a(a){var b=q();b=b==="Complete";return h.jsxs(h.Fragment,{children:[!b&&h.jsx("div",{className:"x1ey2m1c xds687c x10l6tqk x17qophe x13vifvy",children:h.jsx(d("IGDInboxLeftColumnPlaceholder.react").IGDInboxLeftColumnPlaceholderThreadListLayout,{})}),h.jsx(p,babelHelpers["extends"]({},a,{visible:b}))]})}a.displayName=a.name+" [from "+f.id+"]";function r(a){var b=j(function(a){return a},[]),d=j(function(b){return{onGetScrollAreaElement:a,thread:b}},[a]),e=c("useMemoizableRender")(b,d);return j(function(a){return e(a,function(a){return h.jsx(s,babelHelpers["extends"]({},a))})},[e])}function s(a){var e=a.onGetScrollAreaElement;a=a.thread;a=h.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:a.threadKey,children:h.jsx(d("MWThreadKey.react").MWThreadKeyProvider,{id:a.threadKey,children:h.jsx(c("IGDThreadListItem.react"),{thread:a})})});return b("cr:5045")==null?a:h.jsx(b("cr:5045"),{root:e,rootMargin:n,children:a})}s.displayName=s.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDThreadListNullstate.react",["fbt","IGDIsCompactModeContext.react","IGDSText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(){var a=d("IGDIsCompactModeContext.react").useIsCompactMode();return a?i.jsx("div",{className:"x1p5oq8j xxbr6pl xwxc41k xbbxn1n x15yg21f"}):i.jsx("div",{className:"x1p5oq8j xxbr6pl xwxc41k xbbxn1n xxsgkw5",children:i.jsx(c("IGDSText.react"),{size:"body",textAlign:"center",children:h._("__JHASH__RRc9C6O0xlH__JHASH__")})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDInboxThreadListContainer.react",["fbt","CometPagelet.react","I64","IGDProfessionalIGFolderContext.react","IGDSBox.react","IGDSText.react","IGDThreadList.react","IGDThreadListNullstate.react","IgTags_InboxFolder","LSIntEnum","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react").memo;function a(){var a=d("IGDProfessionalIGFolderContext.react").useIsProfessionalIGD(),b=d("IGDProfessionalIGFolderContext.react").useIGDProfessionalFolder(),e=d("I64").equal(b,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").SUBSCRIBER));return i.jsx(d("CometPagelet.react").Placeholder,{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6",fallback:null,name:"IGDThreadList",children:i.jsx(c("IGDThreadList.react"),{beforeContent:e?i.jsx(c("IGDSBox.react"),{padding:8,children:i.jsx(c("IGDSText.react"),{color:"secondaryText",size:"body",textAlign:"center",children:h._("__JHASH__1GyPy_Mo6f6__JHASH__")})}):void 0,emptyContent:e?void 0:i.jsx(c("IGDThreadListNullstate.react"),{}),gridLabel:h._("__JHASH__al1TOxgDFFL__JHASH__").toString(),parentThreadKey:d("LSIntEnum").ofNumber(0),proIgFolder:a?b:void 0})})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("IGDLeftRailContainer.react",["BaseHeadingContext","react","stylex","useIGDDeviceType"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={leftRailContainer:{backgroundColor:"xvbhtw8",borderEnd:"xvb8j5",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",minHeight:"x1t2pt76",position:"x1n2onr6",top:"x13vifvy",width:"xezivpi","@media (max-width: 899px)_height":"x1p0ryx0","@media (max-width: 899px)_minHeight":"x1p5gv8h","@media (max-width: 899px)_position":"xoa9owu","@media (min-width: 900px)_maxHeight":"xcoz2nd","@media (min-width: 900px)_minHeight":"xgfcpv","@media (min-width: 900px)_position":"x1es02x0",$$css:!0},leftRailContainerDesktop:{maxWidth:"x13tiff3",$$css:!0}};function a(a){var b=a.activeNowTray,e=a.header,f=a.primaryNav,g=a.testid;g=a.xstyle;a=i(c("BaseHeadingContext"));var k=d("useIGDDeviceType").useIGDDeviceType().isDesktop;return h.jsxs("div",{className:c("stylex")(j.leftRailContainer,k&&j.leftRailContainerDesktop,g),"data-testid":void 0,children:[e,b,h.jsx(c("BaseHeadingContext").Provider,{value:a+1,children:f!=null&&f})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisIGCoreChevronDownPanoOutline24Icon",["PolarisIGCoreSVGIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("PolarisIGCoreSVGIcon"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 17.502a1 1 0 0 1-.707-.293l-9-9.004a1 1 0 0 1 1.414-1.414L12 15.087l8.293-8.296a1 1 0 0 1 1.414 1.414l-9 9.004a1 1 0 0 1-.707.293Z"})}))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("PolarisIGCoreChevronDownOutline24Icon",["PolarisIGCoreChevronDownPanoOutline24Icon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("PolarisIGCoreChevronDownPanoOutline24Icon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("IGDAccountSwitcher.react",["BaseButton.react","PolarisGenericStrings","PolarisIGCoreChevronDownOutline24Icon","PolarisNavigationActions","PolarisReactRedux","PolarisRoutes","polarisIsUserLoggedIn","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i="direct",j={flex:{alignItems:"x6s0dn4",display:"x78zum5",flexShrink:"xs83m0k",minWidth:"xeuugli",":active_opacity":"x1d5wrs8",$$css:!0},noShrink:{flexShrink:"x2lah0s",marginStart:"x1i64zmx",paddingTop:"x1iorvi4",$$css:!0}};function a(a){a=a.children;var b=d("PolarisReactRedux").useDispatch(),e=function(){b(d("PolarisNavigationActions").openAccountSwitcher({next:d("PolarisRoutes").DIRECT_INBOX,source:i}))};return d("polarisIsUserLoggedIn").isUserLoggedIn()?h.jsxs(c("BaseButton.react"),{onClick:e,xstyle:j.flex,children:[a,h.jsx("div",{className:"x2lah0s x1i64zmx x1iorvi4",children:h.jsx(c("PolarisIGCoreChevronDownOutline24Icon"),{alt:d("PolarisGenericStrings").DOWN_CHEVRON_ALT,size:12})})]}):h.jsx(h.Fragment,{children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDThreadListHeaderAccountSwitcher.react",["IGDAccountSwitcher.react","IGDInboxLeftColumnPlaceholder.react","IGDSText.react","IGDSVerifiedBadge.react","LSContactVerificationBadge.react","MWPActor.react","MWPMessageAuthor.bs","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(){var a=c("useReStore")(),b=d("MWPActor.react").useActor(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(b)},[b,a],f.id+":47");return e==null||e.secondaryName==null?h.jsx(d("IGDInboxLeftColumnPlaceholder.react").IGDInboxLeftColumnPlaceholderUsernameGlimmer,{}):h.jsxs(c("IGDAccountSwitcher.react"),{children:[h.jsx("div",{className:"x6s0dn4 x78zum5 x1q0g3np x1gnnpzl x6ikm8r x10wlt62 xlyipyv xuxw1ft",children:h.jsx(c("IGDSText.react").TitleEmphasized,{maxLines:1,children:String(e.secondaryName)})}),h.jsx("div",{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xl56j7k",children:h.jsx(c("LSContactVerificationBadge.react"),{contact:e,icon:h.jsx(c("IGDSVerifiedBadge.react"),{size:"large"})})})]})}i.displayName=i.name+" [from "+f.id+"]";function a(){var a=d("MWPActor.react").useActor();return h.jsx(d("MWPMessageAuthor.bs").MissingContactProvider,{contactId:a,children:h.jsx(i,{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDSComposeOutlineIcon",["IGDSComposePanoOutlineIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("IGDSComposePanoOutlineIcon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("IGDThreadListNewMessageDialogButton.react",["fbt","CometLazyDialogTrigger.react","CometTransientDialogProvider.react","IGDSComposeOutlineIcon","IGDSDialogPlaceholder.react","IGDSIconButton.react","IGDThreadListNewMessageDialogEntrypointProvider.react","JSResourceForInteraction","MWPBumpEntityKey","MessengerWebUXLogger","react","useOpenOrCreateThreadFromIGDCandidate"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=c("JSResourceForInteraction")("IGDThreadListNewMessageDialog.react").__setRef("IGDThreadListNewMessageDialogButton.react");function a(){var a=c("useOpenOrCreateThreadFromIGDCandidate")(),b=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger();return i.jsx(d("IGDThreadListNewMessageDialogEntrypointProvider.react").IGDThreadListNewMessageDialogEntrypointProvider,{entrypoint:"omnipicker",children:i.jsx(c("CometTransientDialogProvider.react"),{children:i.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:{maxRecipients:31,onSubmit:a},dialogResource:j,fallback:function(a){return i.jsx(c("IGDSDialogPlaceholder.react"),{fixedHeight:!0,onClose:a,size:"large"})},children:function(a){return i.jsx(c("IGDSIconButton.react"),{onClick:function(){b==null?void 0:b({eventName:"create_thread"});a();return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("igd.sidebar","new_chat")},children:i.jsx(c("IGDSComposeOutlineIcon"),{alt:h._("__JHASH__IACR9OarLcm__JHASH__"),color:"ig-primary-text"})})}})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDThreadListNewMessageMobileButton.react",["fbt","IGDSComposeOutlineIcon","PolarisFastLink.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=h._("__JHASH__IACR9OarLcm__JHASH__");function a(){return i.jsx(c("PolarisFastLink.react"),{href:"/direct/new/",children:i.jsx(c("IGDSComposeOutlineIcon"),{alt:j,color:"ig-primary-text"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPThreadsForThreadList.bs",["I64","ReQL.bs","SortedAsyncIterable.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(c!=null){a=d("ReQL.bs").bounds(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromIndexDescending(a.table("threads").index("parentThreadKeyLastActivityTimestampMs")),{hd:b,tl:0}),{NAME:"greaterThan",VAL:{hd:d("I64").zero,tl:0}});b=c.minLastActivityTimestampMs;c=c.maxLastActivityTimestampMs;b=!d("I64").equal(b,d("I64").zero)&&!d("I64").equal(b,d("I64").one)?b:void 0;c=!d("I64").equal(c,d("I64").zero)&&!d("I64").equal(c,d("I64").one)?c:void 0;if(b!=null)if(c!=null)return d("ReQL.bs").bounds(a,{NAME:"range",VAL:[{NAME:"greaterThanOrEqual",VAL:{hd:b,tl:0}},{NAME:"lessThanOrEqual",VAL:{hd:c,tl:0}}]});else return d("ReQL.bs").bounds(a,{NAME:"greaterThanOrEqual",VAL:{hd:b,tl:0}});else if(c!=null)return d("ReQL.bs").bounds(a,{NAME:"lessThanOrEqual",VAL:{hd:c,tl:0}});else return a}else return d("SortedAsyncIterable.bs").empty()}g.createIterable=a}),98);
__d("IGDThreadListMessageRequestsBadge.react",["fbt","IGDSButton.react","IGDSText.react","LSIntEnum","MWPActor.react","MWPThreadsForThreadList.bs","PolarisFastLink.react","ReQL","ReQL.bs","ReQLSuspense","react","useIGDDeviceType","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(){var a=c("useReStore")(),b=d("MWPActor.react").useActor(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("threads_ranges_v2__generated")).getKeyRange(d("LSIntEnum").ofNumber(-1))},[a],f.id+":33");return d("ReQLSuspense").useArray(function(){return d("ReQL.bs").take(d("MWPThreadsForThreadList.bs").createIterable(a,d("LSIntEnum").ofNumber(-1),e),21)},[a,b,e],f.id+":41").length}function a(){var a=j(),b=a>20;b=a===0?h._("__JHASH__daRy5dfwHXm__JHASH__"):h._("__JHASH__n-pVp5pWLGW__JHASH__",[h._plural(a),h._param("messageRequestCount",b?"20+":a)]);var e=d("useIGDDeviceType").useIGDDeviceType();e=e.isMobile;return e?a===0?null:i.jsx(c("IGDSButton.react"),{href:"/direct/requests/",label:b,variant:"primary_link"}):i.jsx(c("PolarisFastLink.react"),{href:"/direct/requests/",children:i.jsx(c("IGDSText.react"),{color:a>0?"primaryButton":"secondaryText",weight:"semibold",zeroMargin:!0,children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDThreadListTitleLayout.react",["react","stylex","useIGDDeviceType"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={container:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"x1nhvcw1",paddingTop:"xyinxu5",paddingEnd:"xxbr6pl",paddingBottom:"x1a8lsjc",paddingStart:"xbbxn1n",$$css:!0},containerMobile:{paddingTop:"xyinxu5",paddingEnd:"x1pi30zi",paddingBottom:"x1a8lsjc",paddingStart:"x1swvt13",$$css:!0}};function a(a){a=a.children;var b=d("useIGDDeviceType").useIGDDeviceType().isMobile;return h.jsx("div",{className:c("stylex")([i.container,b&&i.containerMobile]),children:a})}a.displayName=a.name+" [from "+f.id+"]";function b(a){a=a.children;return h.jsx("div",{className:"x1iyjqo2",children:a})}b.displayName=b.name+" [from "+f.id+"]";g.IGDThreadListTitleLayoutContainer=a;g.IGDThreadListTitleLayoutTitle=b}),98);
__d("IGDThreadListTitle.react",["fbt","IGDIsCompactModeContext.react","IGDSText.react","IGDThreadListMessageRequestsBadge.react","IGDThreadListTitleLayout.react","qex","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=h._("__JHASH__Fjs8sbFk0kD__JHASH__");function a(){var a=d("IGDIsCompactModeContext.react").useIsCompactMode(),b=c("qex")._("206")===!0;return a?null:i.jsxs(d("IGDThreadListTitleLayout.react").IGDThreadListTitleLayoutContainer,{children:[i.jsx(d("IGDThreadListTitleLayout.react").IGDThreadListTitleLayoutTitle,{children:i.jsx(c("IGDSText.react").LabelEmphasized,{elementType:"h1",zeroMargin:!0,children:j})}),b?i.jsx(c("IGDThreadListMessageRequestsBadge.react"),{}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisEncryptedBackupDialogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Create","Restore","Reset","SoftBlock"]);f.DialogType=a}),66);
__d("useEncryptedBackupsProcessState",["gkx","promiseDone","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useState,j=c("requireDeferred")("MWEncryptedBackupsProcessBackupIds.bs").__setRef("useEncryptedBackupsProcessState");function a(a){var b=a.encryptedBackupData,d=a.storage;a=i(1);var e=a[0],f=a[1];h(function(){c("gkx")("7110")&&b!=null?j.onReady(function(a){c("promiseDone")(a.processBackupIdsStoredProcedure(d),function(a){switch(a){case 1:break;case 2:f(2);break;case 3:f(3);break;case 4:f(4);break;case-1:f(-1);break;case 0:break}})}):f(0)},[b,d]);return e}g["default"]=a}),98);
__d("IGDThreadListHeader.react",["CometPlaceholder.react","IGDInboxLeftColumnPlaceholder.react","IGDIsCompactModeContext.react","IGDMobileNavigationButton.react","IGDNavigation","IGDProfessionalIGFolderContext.react","IGDSectionHeader.react","IGDThreadListHeaderAccountSwitcher.react","IGDThreadListNewMessageDialogButton.react","IGDThreadListNewMessageMobileButton.react","IGDThreadListTitle.react","JSResourceForInteraction","MWLSFeatureLimitedStatus.bs","PolarisEncryptedBackupDialogUtils","ReQL","ReQLSuspense","cr:4692","cr:7155","gkx","qex","react","useEncryptedBackupsProcessState","useIGDDeviceType","useIGDSLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.memo,j=e.useEffect,k=c("JSResourceForInteraction")("PolarisEncryptedBackupDialog.react").__setRef("IGDThreadListHeader.react"),l={actionContainer:{display:"x78zum5",$$css:!0},actionContainerCompact:{paddingBottom:"xsag5q8",paddingTop:"x7sb2j6",$$css:!0},root:{display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"x1qughib",paddingBottom:"xsag5q8",paddingStart:"xbbxn1n",paddingEnd:"xxbr6pl",paddingTop:"xijc0j3",$$css:!0},rootMobile:{minHeight:"x1gg8mnh",paddingStart:"x1swvt13",paddingEnd:"x1pi30zi",paddingTop:"xexx8yu",paddingBottom:"x18d9i69",$$css:!0}};function a(){var a=c("useIGDSLazyDialog")(k),e=a[0];a=d("useIGDDeviceType").useIGDDeviceType().isMobile;var g=d("IGDIsCompactModeContext.react").useIsCompactMode(),i=d("IGDProfessionalIGFolderContext.react").useIsProfessionalIGD(),m=d("IGDNavigation").useIGDNavigation(),n=c("useReStore")(),o=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(n.table("encrypted_backups"))},[n],f.id+":78"),p=c("useEncryptedBackupsProcessState")({encryptedBackupData:o,storage:n});j(function(){c("qex")._("121")===!0&&c("gkx")("7182")===!0&&p===4&&e({dialogType:d("PolarisEncryptedBackupDialogUtils").DialogType.Restore})},[p]);o=d("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited();return!a&&g?h.jsx("div",{className:"xsag5q8 x7sb2j6",children:h.jsx(c("IGDThreadListNewMessageDialogButton.react"),{})}):h.jsxs(h.Fragment,{children:[h.jsx(c("IGDSectionHeader.react"),{endAdornment:h.jsx("div",{className:"x78zum5",children:o?null:a?h.jsx(c("IGDThreadListNewMessageMobileButton.react"),{}):h.jsx(c("IGDThreadListNewMessageDialogButton.react"),{})}),isMobile:a,noBottomBorder:!0,startAdornment:a?h.jsx(c("IGDMobileNavigationButton.react"),{onClick:m.goToFeed}):null,xstyle:[l.root,a&&l.rootMobile],children:h.jsx(c("CometPlaceholder.react"),{fallback:h.jsx(d("IGDInboxLeftColumnPlaceholder.react").IGDInboxLeftColumnPlaceholderUsernameGlimmer,{}),children:h.jsx(c("IGDThreadListHeaderAccountSwitcher.react"),{})})}),b("cr:7155")!=null?h.jsx(b("cr:7155"),{}):null,!i&&h.jsx(c("IGDThreadListTitle.react"),{}),b("cr:4692")!=null?h.jsx(b("cr:4692"),{}):null]})}a.displayName=a.name+" [from "+f.id+"]";e=i(a);g["default"]=e}),98);
__d("MWChatSearchInsertRankingContacts.bs",["I64","LSFactory","LSInsertRankingContacts","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h={contents:!1},i={contents:!1},j=d("I64").of_string("100");function a(a){if(!h.contents&&d("I64").gt(j,d("I64").zero)){h.contents=!0;c("promiseDone")(a.runInTransaction(function(a){return c("LSInsertRankingContacts")(j,c("LSFactory")(a))},"readwrite"),function(){i.contents=!0});return}}function b(){return i.contents}g.rankingContactsStarted=h;g.rankingContactsDone=i;g.numRankingContacts=j;g.insertRankingContacts=a;g.isDone=b}),98);
__d("MWLSUseSyncRankings.bs",["LSIntEnum","MWLSDatabaseLazySync.bs","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("MWLSDatabaseLazySync.bs").useSync(d("LSIntEnum").ofNumber(7))}var h={contents:!1},i={contents:!1};function b(a){if(!h.contents){h.contents=!0;c("promiseDone")(d("MWLSDatabaseLazySync.bs").sync(a,d("LSIntEnum").ofNumber(7)),function(){i.contents=!0});return}}function e(){return i.contents}g.useHook=a;g.rankingSyncStarted=h;g.rankingSyncDone=i;g.sync=b;g.isDone=e}),98);
__d("MWPSearchIndexingSource.bs",["I64","LSIntEnum","ReQL.bs","ReQLSuspense","SortedAsyncIterable.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("ReQL.bs").toArray(d("ReQL.bs").fromTableAscending(a.table("contacts")),f.id+":42")}function b(a,b){return d("SortedAsyncIterable.bs").subscribe(d("ReQL.bs").fromTableAscending(a.table("contacts")),function(a,c){return b(a.hd,c)})}function c(a){return d("ReQL.bs").toArray(d("ReQL.bs").filter(d("ReQL.bs").fromTableAscending(a.table("threads")),function(a){return d("I64").equal(a.threadType,d("LSIntEnum").ofNumber(2))}),f.id+":53")}function e(a,b){return d("SortedAsyncIterable.bs").subscribe(d("ReQL.bs").filter(d("ReQL.bs").fromTableAscending(a.table("threads")),function(a){return d("I64").equal(a.threadType,d("LSIntEnum").ofNumber(2))}),function(a,c){return b(a.hd,c)})}function h(a,b){return d("ReQL.bs").toArray(d("ReQL.bs").map(d("ReQL.bs").filter(d("ReQL.bs").fromTableAscending(b.table("participants")),function(b){return!d("I64").equal(b.contactId,a)}),function(a){return[a,d("ReQLSuspense").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(b.table("contacts")),{hd:a.contactId,tl:0}),f.id+":85")]}),f.id+":77")}function i(a,b,c){return d("SortedAsyncIterable.bs").subscribe(d("ReQL.bs").filter(d("ReQL.bs").fromTableAscending(b.table("participants")),function(b){return!d("I64").equal(b.contactId,a)}),function(a,b){return c(a.hd,a.tl.hd,b)})}g.fetchContacts=a;g.subToContacts=b;g.fetchGroupThreads=c;g.subToGroupThreads=e;g.fetchGroupParticipants=h;g.subToGroupParticipants=i}),98);
__d("MWPSearchOfflineOpenConversations",["minisearch"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("minisearch"))({fields:["content"],searchOptions:{fuzzy:.2,prefix:!0},storeFields:["category"]});function a(a){return h.search(a)}function b(a){h.add(a)}function d(a){h.remove(a)}g.search=a;g.add=b;g.remove=d}),98);
__d("LSInstagramE2EEEligibility",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,INELIGIBLE:0,ELIGIBLE:1,REQUIRED:2,DUAL_SEND_ELIGIBLE:3,GROUPS_ELIGIBLE:4});f["default"]=a}),66);
__d("LSRestrictionType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,DATA_PRIVACY:1,ENCRYPTED_THREAD:2});f["default"]=a}),66);
__d("LSSearchType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONTACT:1,NONCONTACT:2,GROUP:3,PAGE:4,INTEGRATED_MESSAGE_SEARCH_THREAD:5,IG_CONTACT_FOLLOWING:6,IG_CONTACT_NONFOLLOWING:7,IG_NONCONTACT_FOLLOWING:8,IG_NONCONTACT_NONFOLLOWING:9,IG_BUSINESS:10,TAM_CONTACT:11,TAM_THREAD:12,COMMUNITY_MESSAGING_THREAD:13,RECOMMENDED_COMMUNITIES:14,SECTION_HEADER:15,AI_BOT:16});f["default"]=a}),66);
__d("MWLSThreadTitle",["fbt","I64","LSMessagingThreadTypeUtil","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){switch(a.length){case 0:return c("gkx")("1341692")?"":h._("__JHASH__v1-lXqbvI1-__JHASH__");case 1:return a[0];case 2:return h._("__JHASH__CYtAjqXrfJL__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1])]);case 3:return h._("__JHASH__0GwsaOqt1zM__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])]);default:return h._("__JHASH__-HjU-GfOUIJ__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("others_count",String(a.length-2))])}}var j=c("gkx")("1846003");function k(a,b,c,e,f,g){if(a!=null)return a;a=d("LSMessagingThreadTypeUtil").isGroup(e);e=c.filter(function(a){return!d("I64").equal(a.contact_id,b)});if(a)return i(e.map(f));return c.length!==1?i(e.map(g)):g(c[0])}function a(a,b,c,d){return k(a,b,c,d,function(a){var b=a.name;a=a.nickname;return j?(a=a)!=null?a:b:b},function(a){var b=a.actual_name;a=a.nickname;return j?(a=a)!=null?a:b:b}).toString()}function b(a,b,c,d){return k(a,b,c,d,function(a){a=a.actual_name;return a},function(a){a=a.actual_name;return a}).toString()}function e(a,b,c,d){return k(a,b,c,d,function(a){var b=a.actual_name;a=a.secondary_name;return(a=a)!=null?a:b},function(a){var b=a.actual_name;a=a.secondary_name;return(a=a)!=null?a:b}).toString()}g.getThreadTitle=k;g.getDefaultThreadTitle=a;g.getThreadTitleWithFullName=b;g.getThreadTitleWithSecondaryNames=e}),98);
__d("MWChatTemporarySearchResult.bs",["I64","LSContactBitOffset","LSContactType","LSContactViewerRelationship","LSInstagramE2EEEligibility","LSIntEnum","LSMediaUrl.bs","LSMessagingThreadTypeUtil","LSRestrictionType","LSSearchType","LSWhatsAppConnectStatus","MWLSContactTypeExactUtils","MWLSThreadTitle","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").IG_CONTACT_NONFOLLOWING))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_FOLLOWING)))return!0;else return d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").IG_NONCONTACT_NONFOLLOWING))}function i(a){if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").NONCONTACT))||h(a))return"user";else if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").GROUP))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").RECOMMENDED_COMMUNITIES))||d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").COMMUNITY_MESSAGING_THREAD)))return"group";else if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").PAGE)))return"page";else if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSSearchType").INTEGRATED_MESSAGE_SEARCH_THREAD)))return"message";else{c("recoverableViolation")("Unknown Search Result Type "+d("I64").to_string(a),"messenger_web_product");return"user"}}function a(a,b,e,f,g){var h=d("MWLSContactTypeExactUtils").isIgContact(e),i=e.secondaryName;i=h&&i!=null?i:"";var j=f!=null?[f.e2eeEligibility,!d("I64").equal(f.e2eeEligibility,d("LSIntEnum").ofNumber(c("LSInstagramE2EEEligibility").INELIGIBLE))]:[void 0,void 0],k=e.contactType;return{canViewerMessage:void 0,communityId:void 0,defaultE2eeThreadOneToOne:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(83),e),defaultE2eeThreads:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(80),e),displayName:e.name,hasCutoverThread:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(76),e),id:d("I64").to_string(e.id),imageUrl:d("LSMediaUrl.bs").Contact.profilePictureUrl(e),isContact:d("I64").equal(e.contactViewerRelationship,d("LSIntEnum").ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER)),isE2EE:b===!0,isEligibleForCmInvite:void 0,isEPD:d("I64").equal(e.restrictionType,d("LSIntEnum").ofNumber(c("LSRestrictionType").DATA_PRIVACY)),isGroupsXacEligible:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(68),e),isInstagramAccount:h,isInteropEligible:d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(67),e),isInvitedToCmChannel:void 0,resultIgid:(b=f==null?void 0:f.igId)!=null?b:void 0,isVerified:(h=d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(23),e))!=null?h:!1,isWAEligible:j[1],otherUserId:void 0,rankingScore:a,restrictionType:void 0,resultType:d("I64").equal(k,d("LSIntEnum").ofNumber(c("LSContactType").USER))||!(d("I64").equal(k,d("LSIntEnum").ofNumber(c("LSContactType").PAGE))||d("I64").equal(k,d("LSIntEnum").ofNumber(c("LSContactType").PAGE_PERSONA)))?"user":"page",searchSource:g,secondaryImageUrl:void 0,section:"",serverSearchResult:void 0,subtext:i,threadJoinLinkHash:void 0,threadKey:void 0,threadType:void 0,waAddressable:d("I64").equal(e.waConnectStatus,d("LSIntEnum").ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_ADDRESSABLE)),waEligibility:j[0],supportsE2eeSpamdStorage:f!=null?f.supportsE2eeSpamdStorage:void 0,isViewerUnconnected:d("LSContactBitOffset").hasWithDefault(d("LSIntEnum").ofNumber(64),e,!0)}}function j(a,b,c){var e=a.threadDescription,f=a.threadName;if(e!=null)return e;else if(f!=null&&f!=="")return d("MWLSThreadTitle").getDefaultThreadTitle(void 0,b,c,a.threadType).toString();else return""}function b(a,b,c,e,f,g,h){var i=j(a,c,g);return{canViewerMessage:void 0,communityId:void 0,defaultE2eeThreadOneToOne:void 0,defaultE2eeThreads:void 0,displayName:d("MWLSThreadTitle").getDefaultThreadTitle(a.threadName,c,g,a.threadType).toString(),hasCutoverThread:void 0,id:d("I64").to_string(a.threadKey),imageUrl:e,isContact:!1,isE2EE:d("LSMessagingThreadTypeUtil").isSecure(a.threadType),isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:void 0,isInstagramAccount:!1,isInteropEligible:void 0,isInvitedToCmChannel:void 0,isVerified:!1,isWAEligible:void 0,otherUserId:void 0,rankingScore:h,restrictionType:void 0,resultType:"group",searchSource:b,secondaryImageUrl:f,section:"",serverSearchResult:void 0,subtext:i,threadJoinLinkHash:void 0,threadKey:a.threadKey,threadType:a.threadType,waAddressable:void 0,waEligibility:void 0,supportsE2eeSpamdStorage:void 0,isViewerUnconnected:void 0,resultIgid:void 0}}function e(a,b,e){var f=d("I64").equal(a.type_,d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT)),g=h(a.type_);b=b!=null?(b=b.displayName)!=null?b:"":"";var j=a.defaultE2eeThreadOneToOne,k=a.defaultE2eeThreads,l=a.hasCutoverThread,m=a.isVerified,n=a.supportsE2eeSpamdStorage,o=a.waEligibility;return{canViewerMessage:a.canViewerMessage,communityId:a.communityId,defaultE2eeThreadOneToOne:j!==null?j:void 0,defaultE2eeThreads:k!==null?k:void 0,displayName:a.displayName,hasCutoverThread:l!==null?l:void 0,id:a.resultId,imageUrl:a.profilePicUrl,isContact:f,isE2EE:d("LSMessagingThreadTypeUtil").isSecure(a.threadType),isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:a.isGroupsXacEligible,isInstagramAccount:g,isInteropEligible:a.isInteropEligible,isInvitedToCmChannel:void 0,isVerified:m!=null?m:!1,isWAEligible:o!=null?!d("I64").equal(o,d("LSIntEnum").ofNumber(c("LSInstagramE2EEEligibility").INELIGIBLE)):void 0,otherUserId:void 0,rankingScore:void 0,restrictionType:a.restrictionType,resultType:i(a.type_),searchSource:e,secondaryImageUrl:a.secondaryProfilePicUrl,section:b,serverSearchResult:a,subtext:f?"":a.contextLine,threadJoinLinkHash:a.threadJoinLinkHash,threadKey:void 0,threadType:a.threadType,waAddressable:a.isWaAddressable,waEligibility:a.waEligibility,supportsE2eeSpamdStorage:n,isViewerUnconnected:a.isViewerUnconnected,resultIgid:a.resultIgid}}g.checkIsInstagramAccount=h;g.getResultType=i;g.fromContact=a;g.getSubtext=j;g.fromThread=b;g.fromServerSearchResult=e}),98);
__d("LSMessageSearchType",[],(function(a,b,c,d,e,f){a=Object.freeze({THREAD:1,MESSAGE:2});f["default"]=a}),66);
__d("LSSearchRequestStatusType",[],(function(a,b,c,d,e,f){a=Object.freeze({PENDING:1,COMPLETE:2,FAILED:3});f["default"]=a}),66);
__d("MWLSParticipant.bs",["I64","LSContactBlockedByViewerStatus","LSContactGender","LSContactType","LSContactWorkForeignEntityType","LSIntEnum","LSMailboxType","LSMediaUrl.bs","MWLSContactTypeExactUtils","ReQL.bs"],(function(a,b,c,d,e,f,g){"use strict";e={actual_name:"",blocked_by_viewer_status:d("LSIntEnum").ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contact_id:d("I64").zero,contactType:d("LSIntEnum").ofNumber(c("LSContactType").UNKNOWN),delivered_watermark_timestamp_ms:d("I64").zero,gender:d("LSIntEnum").ofNumber(c("LSContactGender").UNKNOWN),is_admin:!1,is_messenger_user:!1,mailbox_type:d("LSIntEnum").ofNumber(c("LSMailboxType").MESSENGER),name:"",nickname:void 0,profile_picture_url:"",rank:0,read_action_timestamp_ms:d("I64").zero,read_watermark_timestamp_ms:d("I64").zero,secondary_name:void 0,thread_key:d("I64").zero,work_company_name:void 0,work_foreign_entity_info:d("LSIntEnum").ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN),work_job_title:void 0};function h(a){var b=a[1];a=a[0];var e=a.nickname;if(e!=null)e=e;else{var f=b.firstName;e=f!=null?f:b.name}return{actual_name:b.name,blocked_by_viewer_status:b.blockedByViewerStatus,contact_id:a.contactId,contactType:b.contactType,delivered_watermark_timestamp_ms:a.deliveredWatermarkTimestampMs,gender:b.gender,is_admin:(f=a.isAdmin)!=null?f:!1,is_messenger_user:b.isMessengerUser,mailbox_type:d("LSIntEnum").ofNumber(c("LSMailboxType").MESSENGER),name:e,nickname:a.nickname,profile_picture_url:d("LSMediaUrl.bs").Contact.profilePictureUrl(b),rank:b.rank,read_action_timestamp_ms:a.readActionTimestampMs,read_watermark_timestamp_ms:a.readWatermarkTimestampMs,secondary_name:d("MWLSContactTypeExactUtils").isIgContact(b)?b.secondaryName:void 0,thread_key:a.threadKey,work_company_name:b.workCompanyName,work_foreign_entity_info:b.workForeignEntityType,work_job_title:b.workJobTitle}}function a(a,b,c){return d("ReQL.bs").map(d("ReQL.bs").mergeJoin(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("participants")),{hd:c,tl:0}),b),h)}function b(a,b){return d("ReQL.bs").getKeyRange(a,{hd:b,tl:0})}g.empty=e;g.projectOpen=h;g.getAllInOpenThread=a;g.getInOpenThread=b}),98);
__d("groupBy",[],(function(a,b,c,d,e,f){function a(a,b){return a.reduce(function(a,c){(a[b(c)]=a[b(c)]||[]).push(c);return a},{})}f["default"]=a}),66);
__d("MWInboxSecureContentSearch",["fbt","I64","LSIntEnum","LSMediaUrl.bs","LSMessageSearchType","LSSearchRequestStatusType","MAWBridgeSendAndReceive","MAWThreadId","MAWTimeUtils","MWLSParticipant.bs","MWLSThreadTitle","Promise","ReQL.bs","asyncToGeneratorRuntime","emptyFunction","groupBy"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("ReQL.bs").first(d("ReQL.bs").fromTableAscending(c.table("participants")).getKeyRange(a).filter(function(a){return!d("I64").equal(a.contactId,b)}).map(function(a){return a.contactId})));return a==null?null:d("ReQL.bs").first(d("ReQL.bs").fromTableAscending(c.table("contacts")).getKeyRange(a))});return i.apply(this,arguments)}function j(a,c){return d("MAWThreadId").toThreadKey_DEPRECATED(c,a.chatId).then(function(e){return b("Promise").all([d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(c.table("threads")),{hd:e,tl:0})),b("Promise").resolve(a)])})}function k(a,c,e){var f=d("LSMediaUrl.bs").Thread.threadPictureUrl(a);if(f!=null)return b("Promise").resolve([f,void 0]);else return d("ReQL.bs").toArray(d("ReQL.bs").map(d("ReQL.bs").leftJoin(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("participants")),{hd:a.threadKey,tl:0}),d("ReQL.bs").fromTableAscending(e.table("contacts"))),function(a){a[0];a=a[1];return a})).then(function(a){a=a.filter(Boolean).sort(function(a,b){return a.rank-b.rank}).filter(function(a){return!d("I64").equal(a.id,c)}).map(function(a){return d("LSMediaUrl.bs").Contact.profilePictureUrl(a)});var b=a[0];return b!=null?[b,a[1]]:["",void 0]})}function l(a,b,e){if(a===1||d("I64").equal(e,d("LSIntEnum").ofNumber(c("LSMessageSearchType").MESSAGE)))return b.content;else return h._("__JHASH__MOcENwPdyTO__JHASH__",[h._plural(a,"number")]).toString()}function m(a,b){return d("ReQL.bs").toArray(d("MWLSParticipant.bs").getAllInOpenThread(b,d("ReQL.bs").fromTableAscending(b.table("contacts")),a.threadKey))}function n(a,e,f,g,h,i){return i.runInTransaction(function(n){return j(a,n).then(function(a){var j=a[0];if(j==null)return;var o=a[1];if(o!=null)return b("Promise").all([k(j,h,i),m(j,i)]).then(function(a){var i=a[0],k=o.content;return b("Promise").all([n.table("message_search_queries").put({hasNextPage:void 0,nextPageCursor:void 0,query:f,resultCount:d("I64").of_int32(e),status:d("LSIntEnum").ofNumber(c("LSSearchRequestStatusType").COMPLETE),threadKeyV2:j.threadKey,type_:g}),n.table("message_search_results").put({contextLine:l(e,o,g),displayName:d("MWLSThreadTitle").getThreadTitleWithFullName(j.threadName,h,a[1],j.threadType),globalIndex:d("I64").of_int32(-o.rowId|0),matchLengths:String(f.length),matchOffsets:k!=null?String(k.indexOf(f)):void 0,messageId:o.msgId,messageTimestampMs:d("MAWTimeUtils").toTimestamp(o.ts),profilePicUrl:i[0],query:f,secondaryProfilePicUrl:i[1],threadKey:j.threadKey,threadType:j.threadType,type_:g})]).then(c("emptyFunction"))})})},"readwrite")}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{search:c}));return b("Promise").all(c.map(function(b){if(b.recordType==="msg"){b.recordType;var c=babelHelpers.objectWithoutPropertiesLoose(b,["recordType"]);return d("MAWThreadId").toThreadKey_DEPRECATED(a,c.chatId).then(function(a){return[c,a]})}}).filter(Boolean))});return p.apply(this,arguments)}function e(a,e,f){return o(f,a).then(function(g){return Object.values(c("groupBy")(g,function(a){a[0];a=a[1];return a==null?"":d("I64").to_string(a)})).map(function(b){var g=b[0];if(g!==null){g=g[0];return n(g,b.length,a,d("LSIntEnum").ofNumber(c("LSMessageSearchType").THREAD),e,f)}}).reduce(function(a,d){return b("Promise").all([a,d]).then(c("emptyFunction"))},b("Promise").resolve())})}function f(a,e,f,g){return o(g,a).then(function(h){h=h.filter(function(a){a[0];a=a[1];return e!=null&&a!=null&&d("I64").equal(a,e)});var i=h.length;return h.map(function(b){b=b[0];return n(b,i,a,d("LSIntEnum").ofNumber(c("LSMessageSearchType").MESSAGE),f,g)}).reduce(function(a,d){return b("Promise").all([a,d]).then(c("emptyFunction"))},b("Promise").resolve())})}g.getThreadOtherParticipantContact=a;g.getThreadPics=k;g.getThreadParticipants=m;g.searchSecureDatabaseThreads=e;g.searchSecureDatabaseMessages=f}),98);
__d("MWPSearchOfflineSearchTypes",[],(function(a,b,c,d,e,f){"use strict";a="Contact";b="ThreadName";c="ThreadParticipant";d={Contact:a,ThreadName:b,ThreadParticipant:c};f.MWPSearchType=d}),66);
__d("bs_belt_Array",["bs_caml","bs_caml_option","bs_curry","bs_js_math"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(c>=0&&c<a.length)return b("bs_caml_option").some(a[c])}function c(a,b){if(!(b>=0&&b<a.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",27,4],Error:new Error()};return a[b]}function d(a,b,c){if(b>=0&&b<a.length){a[b]=c;return!0}else return!1}function e(a,b,c){if(!(b>=0&&b<a.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",33,2],Error:new Error()};a[b]=c}function g(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function h(a){var c=a.length;for(var d=0;d<c;++d)g(a,d,b("bs_js_math").random_int(d,c))}function i(a){a=a.slice(0);h(a);return a}function j(a){var b=a.length,c=0;for(var d=0,e=b/2|0;d<e;++d)g(a,c+d|0,((c+b|0)-d|0)-1|0)}function k(a){var b=a.length,c=new Array(b);for(var d=0;d<b;++d)c[d]=a[(b-1|0)-d|0];return c}function l(a,b){if(a<=0)return[];var c=new Array(a);for(var d=0;d<a;++d)c[d]=b;return c}function m(a,b){if(a<=0)return[];var c=new Array(a);for(var d=0;d<a;++d)c[d]=b(d);return c}function n(a,c){return m(a,b("bs_curry").__1(c))}function o(a,b){a=m(a,b);h(a);return a}function p(a,c){return o(a,b("bs_curry").__1(c))}function q(a,b){b=b-a|0;if(b<0)return[];var c=new Array(b+1|0);for(var d=0;d<=b;++d)c[d]=a+d|0;return c}function r(a,b,c){b=b-a|0;if(b<0||c<=0)return[];b=(b/c|0)+1|0;var d=new Array(b);a=a;for(var e=0;e<b;++e)d[e]=a,a=a+c|0;return d}function s(a,b){var c=a.length,d=b.length;c=c<d?c:d;d=new Array(c);for(var e=0;e<c;++e)d[e]=[a[e],b[e]];return d}function t(a,b,c){var d=a.length,e=b.length;d=d<e?d:e;e=new Array(d);for(var f=0;f<d;++f)e[f]=c(a[f],b[f]);return e}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){var c=a.length,d=b.length,e=new Array(c+d|0);for(var f=0;f<c;++f)e[f]=a[f];for(a=0;a<d;++a)e[c+a|0]=b[a];return e}function w(a){var b=a.length,c=0;for(var d=0;d<b;++d)c=c+a[d].length|0;d=new Array(c);c=0;for(var e=0;e<b;++e){var f=a[e];for(var g=0,h=f.length;g<h;++g)d[c]=f[g],c=c+1|0}return d}function x(a,c,d){if(d<=0)return[];var e=a.length;c=c<0?b("bs_caml").caml_int_max(e+c|0,0):c;e=e-c|0;e=e<d?e:d;if(e<=0)return[];d=new Array(e);for(var f=0;f<e;++f)d[f]=a[c+f|0];return d}function y(a,c){var d=a.length;c=c<0?b("bs_caml").caml_int_max(d+c|0,0):c;d=d-c|0;var e=new Array(d);for(var f=0;f<d;++f)e[f]=a[c+f|0];return e}function z(a,c,d,e){if(d<=0)return;var f=a.length;c=c<0?b("bs_caml").caml_int_max(f+c|0,0):c;f=f-c|0;f=f<d?f:d;if(f<=0)return;for(d=c,c=c+f|0;d<c;++d)a[d]=e}function A(a,b,c,d,e){if(d<=b){for(var f=0;f<e;++f)c[f+d|0]=a[f+b|0];return}for(f=e-1|0;f>=0;--f)c[f+d|0]=a[f+b|0]}function B(a,c,d,e,f){var g=a.length,h=d.length;c=c<0?b("bs_caml").caml_int_max(g+c|0,0):c;e=e<0?b("bs_caml").caml_int_max(h+e|0,0):e;f=b("bs_caml").caml_int_min(f,b("bs_caml").caml_int_min(g-c|0,h-e|0));if(e<=c){for(g=0;g<f;++g)d[g+e|0]=a[g+c|0];return}for(h=f-1|0;h>=0;--h)d[h+e|0]=a[h+c|0]}function C(a,b){for(var c=0,d=a.length;c<d;++c)b(a[c])}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,b){var c=a.length,d=new Array(c);for(var e=0;e<c;++e)d[e]=b(a[e]);return d}function F(a,c){return E(a,b("bs_curry").__1(c))}function G(a,c){var d=a.length,e=0,f;while(f===void 0&&e<d){var g=a[e];c(g)&&(f=b("bs_caml_option").some(g));e=e+1|0}return f}function H(a,c){return G(a,b("bs_curry").__1(c))}function I(a,b){var c=a.length,d=0,e;while(e===void 0&&d<c){var f=a[d];b(f)&&(e=d);d=d+1|0}return e}function aa(a,c){return I(a,b("bs_curry").__1(c))}function J(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0;f<c;++f){var g=a[f];b(g)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function ba(a,c){return J(a,b("bs_curry").__1(c))}function K(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0;f<c;++f){var g=a[f];b(g,f)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function ca(a,c){return K(a,b("bs_curry").__2(c))}function L(a,c){var d=a.length,e=new Array(d),f=0;for(var g=0;g<d;++g){var h=a[g];h=c(h);h!==void 0&&(e[f]=b("bs_caml_option").valFromOption(h),f=f+1|0)}e.length=f;return e}function da(a,c){return L(a,b("bs_curry").__1(c))}function M(a,b){for(var c=0,d=a.length;c<d;++c)b(c,a[c])}function ea(a,c){return M(a,b("bs_curry").__2(c))}function N(a,b){var c=a.length,d=new Array(c);for(var e=0;e<c;++e)d[e]=b(e,a[e]);return d}function fa(a,c){return N(a,b("bs_curry").__2(c))}function O(a,b,c){b=b;for(var d=0,e=a.length;d<e;++d)b=c(b,a[d]);return b}function ga(a,c,d){return O(a,c,b("bs_curry").__2(d))}function P(a,b,c){b=b;for(var d=a.length-1|0;d>=0;--d)b=c(b,a[d]);return b}function ha(a,c,d){return P(a,c,b("bs_curry").__2(d))}function Q(a,c,d,e){d=d;var f=b("bs_caml").caml_int_min(a.length,c.length);for(f=f-1|0;f>=0;--f)d=e(d,a[f],c[f]);return d}function ia(a,c,d,e){return Q(a,c,d,b("bs_curry").__3(e))}function R(a,b,c){b=b;for(var d=0,e=a.length;d<e;++d)b=c(b,a[d],d);return b}function ja(a,c,d){return R(a,c,b("bs_curry").__3(d))}function S(a,b){var c=a.length,d=0;while(!0){var e=d;if(e===c)return!0;if(!b(a[e]))return!1;d=e+1|0;continue}}function ka(a,c){return S(a,b("bs_curry").__1(c))}function T(a,b){var c=a.length,d=0;while(!0){var e=d;if(e===c)return!1;if(b(a[e]))return!0;d=e+1|0;continue}}function la(a,c){return T(a,b("bs_curry").__1(c))}function U(a,b,c,d,e){while(!0){var f=c;if(f===e)return!0;if(!d(a[f],b[f]))return!1;c=f+1|0;continue}}function V(a,c,d){return U(a,c,0,d,b("bs_caml").caml_int_min(a.length,c.length))}function ma(a,c,d){return V(a,c,b("bs_curry").__2(d))}function W(a,c,d){var e=0,f=b("bs_caml").caml_int_min(a.length,c.length);while(!0){var g=e;if(g===f)return!1;if(d(a[g],c[g]))return!0;e=g+1|0;continue}}function na(a,c,d){return W(a,c,b("bs_curry").__2(d))}function X(a,b,c){var d=a.length,e=b.length;if(d===e)return U(a,b,0,c,d);else return!1}function oa(a,c,d){return X(a,c,b("bs_curry").__2(d))}function Y(a,b,c){var d=a.length,e=b.length;if(d>e)return 1;else if(d<e)return-1;else{e=0;while(!0){var f=e;if(f===d)return 0;var g=c(a[f],b[f]);if(g!==0)return g;e=f+1|0;continue}}}function pa(a,c,d){return Y(a,c,b("bs_curry").__2(d))}function Z(a,b){var c=a.length,d=0,e=0,f=new Array(c),g=new Array(c);for(var h=0;h<c;++h){var i=a[h];b(i)?(f[d]=i,d=d+1|0):(g[e]=i,e=e+1|0)}f.length=d;g.length=e;return[f,g]}function qa(a,c){return Z(a,b("bs_curry").__1(c))}function ra(a){var b=a.length,c=new Array(b),d=new Array(b);for(var e=0;e<b;++e){var f=a[e];c[e]=f[0];d[e]=f[1]}return[c,d]}function $(a,b,c){var d=a.length;if(d===0)return"";d=d-1|0;var e=0,f="";while(!0){var g=f,h=e;if(h===d)return g+c(a[h]);f=g+(c(a[h])+b);e=h+1|0;continue}}function sa(a,c,d){return $(a,c,b("bs_curry").__1(d))}f.get=a;f.getExn=c;f.set=d;f.setExn=e;f.shuffleInPlace=h;f.shuffle=i;f.reverseInPlace=j;f.reverse=k;f.make=l;f.range=q;f.rangeBy=r;f.makeByU=m;f.makeBy=n;f.makeByAndShuffleU=o;f.makeByAndShuffle=p;f.zip=s;f.zipByU=t;f.zipBy=u;f.unzip=ra;f.concat=v;f.concatMany=w;f.slice=x;f.sliceToEnd=y;f.fill=z;f.blit=B;f.blitUnsafe=A;f.forEachU=C;f.forEach=D;f.mapU=E;f.map=F;f.getByU=G;f.getBy=H;f.getIndexByU=I;f.getIndexBy=aa;f.keepU=J;f.keep=ba;f.keepWithIndexU=K;f.keepWithIndex=ca;f.keepMapU=L;f.keepMap=da;f.forEachWithIndexU=M;f.forEachWithIndex=ea;f.mapWithIndexU=N;f.mapWithIndex=fa;f.partitionU=Z;f.partition=qa;f.reduceU=O;f.reduce=ga;f.reduceReverseU=P;f.reduceReverse=ha;f.reduceReverse2U=Q;f.reduceReverse2=ia;f.reduceWithIndexU=R;f.reduceWithIndex=ja;f.joinWithU=$;f.joinWith=sa;f.someU=T;f.some=la;f.everyU=S;f.every=ka;f.every2U=V;f.every2=ma;f.some2U=W;f.some2=na;f.cmpU=Y;f.cmp=pa;f.eqU=X;f.eq=oa}),null);
__d("bs_belt_SortArray",["bs_belt_Array","bs_curry"],(function(a,b,c,d,e,f){"use strict";function g(a,b,c,d,e){while(!0){var f=c,g=b;if(f>=d)return f;var h=a[f];if(!e(h,g))return f;c=f+1|0;b=h;continue}}function h(a,b){var c=a.length;if(c===0||c===1)return c;var d=a[0],e=a[1];if(b(d,e)){var f=e,h=2;while(!0){var i=h,j=f;if(i>=c)return i;var k=a[i];if(!b(j,k))return i;h=i+1|0;f=k;continue}}else if(b(e,d))return-g(a,e,2,c,b)|0;else return 1}function a(a,c){return h(a,b("bs_curry").__2(c))}function i(a,b){var c=a.length;if(c===0)return!0;else{var d=0;c=c-1|0;while(!0){var e=d;if(e===c)return!0;if(b(a[e],a[e+1|0])>0)return!1;d=e+1|0;continue}}}function c(a,c){return i(a,b("bs_curry").__2(c))}function j(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;if(j(p,n)<=0){h[m]=p;p=q+1|0;if(p>=d)return b("bs_belt_Array").blitUnsafe(e,o,h,m+1|0,g-o|0);i=m+1|0;c=a[p];k=p;continue}h[m]=n;p=o+1|0;if(p>=g)return b("bs_belt_Array").blitUnsafe(a,q,h,m+1|0,d-q|0);i=m+1|0;f=e[p];l=p;continue}}function k(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k,r=j(p,n);if(r<0){h[m]=p;var s=q+1|0,t=m+1|0;if(s<d){i=t;c=a[s];k=s;continue}b("bs_belt_Array").blitUnsafe(e,o,h,t,g-o|0);return(t+g|0)-o|0}if(r===0){h[m]=p;s=q+1|0;t=o+1|0;r=m+1|0;if(!(s<d&&t<g))if(s===d){b("bs_belt_Array").blitUnsafe(e,t,h,r,g-t|0);return(r+g|0)-t|0}else{b("bs_belt_Array").blitUnsafe(a,s,h,r,d-s|0);return(r+d|0)-s|0}i=r;f=e[t];l=t;c=a[s];k=s;continue}h[m]=n;p=o+1|0;r=m+1|0;if(p<g){i=r;f=e[p];l=p;continue}b("bs_belt_Array").blitUnsafe(a,q,h,r,d-q|0);return(r+d|0)-q|0}}function d(a,c,d,e,f,g,h,i,j){return k(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function l(a,b,c,d,e,f,g,h,i){c=b+c|0;f=e+f|0;var j=b;b=a[b];var k=e;e=d[e];h=h;while(!0){var l=h,m=e,n=k,o=b,p=j;m=i(o,m);if(m<0){var q=p+1|0;if(q>=c)return l;b=a[q];j=q;continue}if(m===0){g[l]=o;q=p+1|0;m=n+1|0;o=l+1|0;if(!(q<c&&m<f))return o;h=o;e=d[m];k=m;b=a[q];j=q;continue}p=n+1|0;if(p>=f)return l;e=d[p];k=p;continue}}function e(a,c,d,e,f,g,h,i,j){return l(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function m(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;n=j(p,n);if(n<0){h[m]=p;p=m+1|0;var r=q+1|0;if(r>=d)return p;i=p;c=a[r];k=r;continue}if(n===0){p=q+1|0;r=o+1|0;if(!(p<d&&r<g))if(p===d)return m;else{b("bs_belt_Array").blitUnsafe(a,p,h,m,d-p|0);return(m+d|0)-p|0}f=e[r];l=r;c=a[p];k=p;continue}n=o+1|0;if(n<g){f=e[n];l=n;continue}b("bs_belt_Array").blitUnsafe(a,q,h,m,d-q|0);return(m+d|0)-q|0}}function n(a,c,d,e,f,g,h,i,j){return m(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function o(a,b,c,d,e,f){for(var g=0;g<e;++g){var h=a[b+g|0],i=(d+g|0)-1|0;while(i>=d&&f(c[i],h)>0)c[i+1|0]=c[i],i=i-1|0;c[i+1|0]=h}}function p(a,b,c,d,e,f){if(e<=5)return o(a,b,c,d,e,f);var g=e/2|0;e=e-g|0;p(a,b+g|0,c,d+g|0,e,f);p(a,b,a,b+e|0,g,f);return j(a,b+e|0,g,c,d+g|0,e,c,d,f)}function q(a,b){var c=a.length;if(c<=5)return o(a,0,a,0,c,b);var d=c/2|0;c=c-d|0;var e=new Array(c);p(a,d,e,0,c,b);p(a,0,a,c,d,b);return j(a,c,d,e,0,c,a,0,b)}function r(a,c){return q(a,b("bs_curry").__2(c))}function s(a,b){a=a.slice(0);q(a,b);return a}function t(a,c){return s(a,b("bs_curry").__2(c))}function u(a,b,c){var d=a.length;if(d===0)return-1;var e=a[0];e=c(b,e);if(e<0)return-1;e=a[d-1|0];e=c(b,e);if(e>0)return-(d+1|0)|0;else{e=0;d=d-1|0;while(!0){var f=d,g=e,h=(g+f|0)/2|0,i=a[h];i=c(b,i);if(i===0)return h;if(i<0){if(f===h)if(c(a[g],b)===0)return g;else return-(f+1|0)|0;d=h;continue}if(g===h)if(c(a[f],b)===0)return f;else return-(f+1|0)|0;e=h;continue}}}function v(a,c,d){return u(a,c,b("bs_curry").__2(d))}var w,x;f.Int=w;f.$$String=x;f.strictlySortedLengthU=h;f.strictlySortedLength=a;f.isSortedU=i;f.isSorted=c;f.stableSortInPlaceByU=q;f.stableSortInPlaceBy=r;f.stableSortByU=s;f.stableSortBy=t;f.binarySearchByU=u;f.binarySearchBy=v;f.unionU=k;f.union=d;f.intersectU=l;f.intersect=e;f.diffU=m;f.diff=n}),null);
__d("MWPSearchOfflineOpenConversations.bs",["I64","LSContactBitOffset","LSInitSyncCompleteSubscription","LSIntEnum","LSMessagingThreadTypeUtil","MNetRankType","MWChatTemporarySearchResult.bs","MWInboxSecureContentSearch","MWPSearchOfflineOpenConversations","MWPSearchOfflineSearchTypes","Promise","ReQL.bs","asyncToGeneratorRuntime","bs_belt_SortArray"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return"p__"+d("I64").to_string(a)+"__"+d("I64").to_string(b)}function h(a){a=a.split("__");var b=a.length;if(b!==3)return;else return[d("I64").of_string(a[1]),d("I64").of_string(a[2])]}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=(yield b("Promise").all([d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:d("I64").of_string(e),tl:0})),d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("ig_contact_info")),{hd:d("I64").of_string(e),tl:0})),d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("ranking_scores")),{hd:d("I64").of_string(e),tl:{hd:d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH),tl:0}}))]));e=a[0];var f=a[1];a=a[2];if(e==null)return;if(e.isMemorialized!==!0&&!d("I64").equal(e.contactViewerRelationship,d("I64").one)&&d("I64").equal(e.blockedByViewerStatus,d("I64").zero)&&!d("LSContactBitOffset").hasWithDefault(d("LSIntEnum").ofNumber(66),e,!1)){return d("MWChatTemporarySearchResult.bs").fromContact((a=a)!=null?a:void 0,void 0,e,(a=f)!=null?a:void 0,"offline")}});return j.apply(this,arguments)}function k(a,c){return b("Promise").all([d("ReQL.bs").firstExn(d("ReQL.bs").map(d("ReQL.bs").fromTableAscending(a.table("_user_info")),function(a){return a.facebookUserId})),d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("threads")),{hd:d("I64").of_string(c),tl:0}))]).then(function(c){var e=c[1];if(e!=null&&e.folderName==="inbox"){if(d("LSMessagingThreadTypeUtil").isChannelPreview(e.threadType))return b("Promise").resolve();var f=c[0];return b("Promise").all([d("MWInboxSecureContentSearch").getThreadPics(e,f,a),d("MWInboxSecureContentSearch").getThreadParticipants(e,a)]).then(function(a){var b=a[0],c=d("I64").to_float(e.lastActivityTimestampMs);c={contactId:d("I64").zero,contactType:d("I64").zero,score:c,scoreIndex:d("I64").zero,scoreType:d("I64").zero};return d("MWChatTemporarySearchResult.bs").fromThread(e,"offline",f,b[0],b[1],a[1],c)})}else return b("Promise").resolve()})}function l(a,b){a=a.rankingScore;a=a!=null?a.score:0;b=b.rankingScore;b=b!=null?b.score:0;if(b>a)return 1;else if(b<a)return-1;else return 0}function m(a,e){return b("Promise").all(e.map(function(c){var e=c.category;switch(e.type){case d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant:e=h(c.id);if(e!=null){e=e[0];return k(a,d("I64").to_string(e))}else return b("Promise").resolve();case d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName:return k(a,c.id);case d("MWPSearchOfflineSearchTypes").MWPSearchType.Contact:return i(a,c.id)}})).then(function(a){a=a.filter(Boolean);var b=c("bs_belt_SortArray").stableSortByU(a.filter(function(a){return a.resultType!=="group"}),l);a=c("bs_belt_SortArray").stableSortByU(a.filter(function(a){return a.resultType==="group"}),l);return b.concat(a)})}var n={contents:void 0};function e(a,c){var e=n.contents;if(e==null)return b("Promise").resolve([]);var f=d("MWPSearchOfflineOpenConversations").search(a).map(function(a){return a}).filter(function(a){if(c)return!0;a=a.category;switch(a.TAG){case 0:case 1:return!1;case 2:return!0}});return d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(e,d("LSIntEnum").ofNumber(7)).then(function(){return m(e,f)})}function o(a,c,e){return d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(a,d("LSIntEnum").ofNumber(7)).then(function(){return b("Promise").all(c.map(function(b){return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("ranking_scores")),{hd:d("I64").of_string(b),tl:{hd:e,tl:0}})).then(function(a){if(a!=null)return[b,a.score]})}))})}function f(a,b){return o(a,b,d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH))}g.getGroupParticipantKey=a;g.parseGroupParticipantKey=h;g.sortByRankingScore=l;g.searchHelper=m;g.db=n;g.search=e;g.fetchRankingScoresHelper=o;g.fetchRankingScoresKP=f}),98);
__d("MWPSearchOpenIndexer.bs",["I64","MWPSearchOfflineOpenConversations","MWPSearchOfflineOpenConversations.bs","MWPSearchOfflineSearchTypes","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function i(a){var b=d("I64").to_string(a.id);a=a.name;var c={type:d("MWPSearchOfflineSearchTypes").MWPSearchType.Contact};c={category:c,content:a,id:b};d("MWPSearchOfflineOpenConversations").add(c);h.set(b,c)}function j(a){var b=h.get(a);if(b!=null){h["delete"](a);d("MWPSearchOfflineOpenConversations").remove(b);return}}var k={addToIndex:i,contactRecords:h,remove:j},l=new Map();function m(a){var b=a.threadName;if(b==null)return;a=d("I64").to_string(a.threadKey);var c={type:d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName};c={category:c,content:b,id:a};d("MWPSearchOfflineOpenConversations").add(c);l.set(a,c)}function n(a){var b=l.get(a);if(b!=null){l["delete"](a);d("MWPSearchOfflineOpenConversations").remove(b);return}}var o={addToIndex:m,remove:n,threadRecords:l},p=new Map();function q(a,b){if(b==null)return;a=d("MWPSearchOfflineOpenConversations.bs").getGroupParticipantKey(a.threadKey,a.contactId);b=b.name;var c={type:d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant};c={category:c,content:b,id:a};d("MWPSearchOfflineOpenConversations").add(c);p.set(a,c)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(b.contactId)));return q(b,a)});return s.apply(this,arguments)}function t(a,b){a=d("MWPSearchOfflineOpenConversations.bs").getGroupParticipantKey(a,b);b=p.get(a);if(b!=null){p["delete"](a);d("MWPSearchOfflineOpenConversations").remove(b);return}}var u={addToIndex:q,addToIndexWithoutContact:r,participantRecords:p,remove:t};function a(a,b){switch(b.TAG){case 0:return i(b._0);case 1:b=b._0;j(d("I64").to_string(b.id));return i(b);case 2:return j(d("I64").to_string(a))}}function c(a,b){switch(b.TAG){case 0:return m(b._0);case 1:b=b._0;n(d("I64").to_string(b.threadKey));return m(b);case 2:return n(d("I64").to_string(a))}}function e(a,c,d,e){switch(e.TAG){case 0:return r(a,e._0);case 1:t(c,d);return r(a,e._0);case 2:return b("Promise").resolve(t(c,d))}}function f(a,b,c,e){d("MWPSearchOfflineOpenConversations.bs").db.contents=a,b.forEach(i),c.forEach(m),e.forEach(function(a){return q(a[0],a[1])})}g.Contacts=k;g.GroupThreads=o;g.GroupParticipants=u;g.onContactChanged=a;g.onGroupThreadChanged=c;g.onGroupParticipantChanged=e;g.startInitialIndex=f}),98);
__d("MWPSearchSystem",["CurrentUser","FBLogger","I64","JSScheduler","LSClearTables","LSFactory","MWChatSearchInsertRankingContacts.bs","MWLSUseSyncRankings.bs","MWPSearchIndexingSource.bs","MWPSearchOpenIndexer.bs","Promise","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h={contents:!1},i={contents:!1},j={contents:!1},k=c("gkx")("2190");function a(a){if(!j.contents){j.contents=!0;d("JSScheduler").scheduleSpeculativeCallback(function(){d("MWChatSearchInsertRankingContacts.bs").insertRankingContacts(a);d("MWLSUseSyncRankings.bs").sync(a);var e=d("I64").of_string(c("CurrentUser").getID());if(!h.contents){h.contents=!0;c("promiseDone")(b("Promise").all([d("MWPSearchIndexingSource.bs").fetchContacts(a),k?d("MWPSearchIndexingSource.bs").fetchGroupThreads(a):b("Promise").resolve([]),k?d("MWPSearchIndexingSource.bs").fetchGroupParticipants(e,a):b("Promise").resolve([])]).then(function(b){var c=b[0];d("MWPSearchOpenIndexer.bs").startInitialIndex(a,c,b[1],b[2])}),function(){i.contents=!0},function(a){c("FBLogger")("messenger_search").catching(a).mustfix("Error indexing contacts for search")});d("MWPSearchIndexingSource.bs").subToContacts(a,function(a,b){return d("MWPSearchOpenIndexer.bs").onContactChanged(a,b)});if(k){d("MWPSearchIndexingSource.bs").subToGroupThreads(a,function(a,b){return d("MWPSearchOpenIndexer.bs").onGroupThreadChanged(a,b)});d("MWPSearchIndexingSource.bs").subToGroupParticipants(e,a,function(b,c,e){return d("MWPSearchOpenIndexer.bs").onGroupParticipantChanged(a,b,c,e)});return}else return}else return});return}}function e(a){return a.runInTransaction(function(a){return c("LSClearTables")(c("LSFactory")(a))},"readwrite")}function f(){if(d("MWLSUseSyncRankings.bs").isDone()&&d("MWChatSearchInsertRankingContacts.bs").isDone())return i.contents;else return!1}g.initialIndexingStarted=h;g.initialIndexingDone=i;g.makeAllStarted=j;g.makeAll=a;g.clearAll=e;g.isDone=f}),98);
__d("IGDInboxLeftRail.react",["CometTransientDialogProvider.react","IGDInboxThreadListContainer.react","IGDLeftRailContainer.react","IGDThreadListHeader.react","MWPSearchSystem","cr:6695","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.memo,j=e.useEffect,k=e.useRef;function a(a){a=a.xstyle;var e=c("useReStore")(),f=k(!1);j(function(){window.setTimeout(function(){f.current||(d("MWPSearchSystem").makeAll(e),f.current=!0)},1e4)},[]);return h.jsx(c("CometTransientDialogProvider.react"),{children:h.jsx(c("IGDLeftRailContainer.react"),{activeNowTray:b("cr:6695")!=null?h.jsx(b("cr:6695"),{}):void 0,header:h.jsx(c("IGDThreadListHeader.react"),{}),primaryNav:h.jsx(c("IGDInboxThreadListContainer.react"),{}),xstyle:a})})}a.displayName=a.name+" [from "+f.id+"]";e=i(a);g["default"]=e}),98);
__d("IGDUseBlockedUserInterstitial.react",["I64","Int64Hooks","JSResourceForInteraction","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWPActor.react","ReQL","ReQLSuspense","WebStorage","asyncToGeneratorRuntime","recoverableViolation","useCometLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return"__BlockOrRestrictUserInterstitial."+a+"__"}function a(a){var e=c("useCometLazyDialog")(c("JSResourceForInteraction")("IGDGroupBlockAlertDialog.react").__setRef("IGDUseBlockedUserInterstitial.react")),g=e[0],i=c("useReStore")(),j=d("MWPActor.react").useActor();return d("Int64Hooks").useCallbackInt64(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(i.table("threads")).getKeyRange(a))),k=d("ReQL").mergeJoin(d("ReQL").fromTableAscending(i.table("participants")).getKeyRange(a),d("ReQL").fromTableAscending(i.table("contacts"))).filter(function(a){a[0];a=a[1];return!d("I64").equal(a.id,j)}).map(function(a){a[0];a=a[1];return a});k=d("ReQLSuspense").toArray(k,f.id+":62");k=k.filter(function(a){return!d("I64").equal(a.blockedByViewerStatus,d("LSIntEnum").ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))});var l=e!=null?!d("I64").equal(e.parentThreadKey,d("LSIntEnum").ofNumber(-10))&&d("LSMessagingThreadTypeUtil").isGroup(e.threadType)&&d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(28),e):!1;e=e!=null?d("LSMessagingThreadTypeUtil").isGroup(e.threadType):!1;var m=c("WebStorage").getLocalStorage(),n=h(a),o=m==null?void 0:m.getItem(n);o=o!=null?o==="true":!1;o=!o&&k.length>0&&e&&l;if(!o)return b();k=function(){var a=c("WebStorage").setItemGuarded(m,n,"true");a!=null&&c("recoverableViolation")("Unable to set item at path for BlockedUserInterstitial","messenger_web_product");return b()};return g({onClick:k,onClose:function(){}},function(){})});return function(a){return e.apply(this,arguments)}}(),[j,i,g,a])}g.getWarningCardStorageKey=h;g.useHook=a}),98);